# تعليمات Agent Codex للاختبارات والمراجعات بعد الدمج

تضمن هذه التعليمات أن يتم اختبار كل تعديل يتم دمجه في الفرع الرئيسي، ثم إنشاء مهمة مراجعة برمجية تلقائيًا لمتابعة الجودة بعد الإطلاق.

## 1. تشغيل الاختبارات الآلية
- بعد دمج أي Pull Request في الفرع الرئيسي يقوم خط CI بتثبيت الاعتمادات وتشغيل الأمر `npm test` الذي يعتمد على مشغل Node.js المدمج (`node --test`).
- يغطي الأمر `npm test` جميع اختبارات النظام الموجودة داخل مجلد `tests/` ويُستخدم للتحقق من عدم كسر التعديلات للوظائف الأساسية.

## 2. إنشاء مهمة Code Review بعد الدمج
- عند اكتمال الاختبارات بنجاح يقوم خط العمل `Post-merge tests and review task` بإنشاء بطاقة متابعة بعنوان `Code review: <عنوان الـPR> (#<رقم الـPR>)`.
- تُضاف البطاقة إلى مستودع GitHub كقضية جديدة تحمل تصنيف `code-review`، وتحتوي على تفاصيل المؤلف، منفّذ الدمج، ورابط الـPR الأصلي.
- إذا كانت هناك بطاقة مفتوحة بنفس العنوان فلن يُنشأ تكرار جديد.

## 3. ما الذي يجب على فريق المراجعة فعله؟
1. فتح قضية المراجعة الجديدة.
2. التحقق من التغييرات المدمجة على بيئة الإنتاج أو بيئة المعاينة.
3. تدوين أي ملاحظات أو متطلبات متابعة داخل نفس القضية، وإغلاقها بعد الانتهاء من المراجعة.

## 4. اعتبارات إضافية
- في حال فشل الاختبارات سيظهر الفشل داخل خط العمل ولن تُنشأ بطاقة مراجعة حتى يتم إصلاح الأعطال.
- تأكد من أن أي اختبارات جديدة تُضاف للمشروع تتوافق مع مشغل `node --test` حتى يتم التقاطها تلقائيًا بواسطة الأمر `npm test`.
