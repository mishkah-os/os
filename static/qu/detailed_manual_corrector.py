#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import json
import re
from typing import Tuple, List

class DetailedManualCorrector:
    """Ù…ØµØ­Ø­ ÙŠØ¯ÙˆÙŠ Ù…ØªÙ‚Ø¯Ù… Ø¬Ø¯Ø§Ù‹ Ù„Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙƒØ¨Ø© ÙˆØ§Ù„Ù…Ø¹Ù‚Ø¯Ø©"""

    def __init__(self):
        # Ù‚Ø§Ù…ÙˆØ³ Ø´Ø§Ù…Ù„ Ù„Ù„ÙƒÙ„Ù…Ø§Øª ÙˆØ§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙƒØ¨Ø©
        self.compound_corrections = {
            # Ø­Ø±Ù Ø¹Ø·Ù + Ù†ÙÙŠ
            'ÙˆÙ+Ù„Ø§': (['ÙˆÙ', 'Ù„Ø§'], 'Ù„.#', '1.2,1.10'),
            'ÙˆÙ+Ù…Ø§': (['ÙˆÙ', 'Ù…Ø§'], 'Ù….#', '1.2,1.10'),
            'ÙÙ+Ù„Ø§': (['ÙÙ', 'Ù„Ø§'], 'Ø­Ø±Ù', '1.2,1.10'),
            'ÙÙ+Ù…Ø§': (['ÙÙ', 'Ù…Ø§'], 'Ø­Ø±Ù', '1.2,1.10'),

            # Ø­Ø±Ù + ØªØ¹Ø±ÙŠÙ + Ø§Ø³Ù…
            'ÙˆÙ+Ø§Ù„+Ù„Ù‘Ù°Ù‡': (['ÙˆÙ', 'Ø§Ù„', 'Ù„Ù‘Ù°Ù‡'], 'Ø¡.Ù„.Ù‡', '1.2,1.5,2.2'),
            'Ø¨Ù+Ø§Ù„+Ù„Ù‘Ù°Ù‡': (['Ø¨Ù', 'Ø§Ù„', 'Ù„Ù‘Ù°Ù‡'], 'Ø¡.Ù„.Ù‡', '1.1,1.5,2.2'),
            'Ù„Ù+Ø§Ù„+Ù„Ù‘Ù°Ù‡': (['Ù„Ù', 'Ø§Ù„', 'Ù„Ù‘Ù°Ù‡'], 'Ø¡.Ù„.Ù‡', '1.1,1.5,2.2'),

            # Ø§Ø³Ù… + Ø¶Ù…ÙŠØ± Ù…ØªØµÙ„
            'Ø±ÙØ¨Ù‘+ÙƒÙ': (['Ø±ÙØ¨Ù‘', 'ÙƒÙ'], 'Ø±.Ø¨.Ø¨', '2.1,4.2'),
            'Ø±ÙØ¨Ù‘+ÙƒÙÙ…': (['Ø±ÙØ¨Ù‘', 'ÙƒÙÙ…'], 'Ø±.Ø¨.Ø¨', '2.1,4.2'),
            'Ø±ÙØ¨Ù‘+ÙÙŠ': (['Ø±ÙØ¨Ù‘', 'ÙÙŠ'], 'Ø±.Ø¨.Ø¨', '2.1,4.2'),
            'Ø±ÙØ¨Ù‘+Ù‡ÙÙ…': (['Ø±ÙØ¨Ù‘', 'Ù‡ÙÙ…'], 'Ø±.Ø¨.Ø¨', '2.1,4.2'),
            'Ø±ÙØ¨Ù‘+Ù†Ø§': (['Ø±ÙØ¨Ù‘', 'Ù†Ø§'], 'Ø±.Ø¨.Ø¨', '2.1,4.2'),
            'Ø±ÙØ¨Ù‘+Ù‡Ù': (['Ø±ÙØ¨Ù‘', 'Ù‡Ù'], 'Ø±.Ø¨.Ø¨', '2.1,4.2'),

            # Ø¬Ø§Ø± + Ù…Ø¬Ø±ÙˆØ±
            'Ù…ÙÙ†+Ù‡ÙÙ…': (['Ù…ÙÙ†', 'Ù‡ÙÙ…'], 'Ø­Ø±Ù', '1.1,4.2'),
            'Ù…ÙÙ†+Ù‡Ù': (['Ù…ÙÙ†', 'Ù‡Ù'], 'Ø­Ø±Ù', '1.1,4.2'),
            'Ù…ÙÙ†+Ù…Ø§': (['Ù…ÙÙ†', 'Ù…Ø§'], 'Ø­Ø±Ù', '1.1,2.4'),
            'Ù…ÙÙ†+ÙƒÙÙ…': (['Ù…ÙÙ†', 'ÙƒÙÙ…'], 'Ø­Ø±Ù', '1.1,4.2'),
            'Ù…ÙÙ†+Ù‡Ø§': (['Ù…ÙÙ†', 'Ù‡Ø§'], 'Ø­Ø±Ù', '1.1,4.2'),

            'ÙÙÙŠ+Ù‡Ø§': (['ÙÙÙŠ', 'Ù‡Ø§'], 'Ø­Ø±Ù', '1.1,4.2'),
            'ÙÙÙŠ+Ù‡Ù': (['ÙÙÙŠ', 'Ù‡Ù'], 'Ø­Ø±Ù', '1.1,4.2'),

            'Ø¹ÙÙ„ÙÙ‰+Ù‡ÙÙ…': (['Ø¹ÙÙ„ÙÙ‰', 'Ù‡ÙÙ…'], 'Ø¹.Ù„.Ùˆ', '1.1,4.2'),
            'Ø¹ÙÙ„ÙÙ‰+Ù‡Ù': (['Ø¹ÙÙ„ÙÙ‰', 'Ù‡Ù'], 'Ø¹.Ù„.Ùˆ', '1.1,4.2'),
            'Ø¹ÙÙ„ÙÙ‰+ÙƒÙÙ…': (['Ø¹ÙÙ„ÙÙ‰', 'ÙƒÙÙ…'], 'Ø¹.Ù„.Ùˆ', '1.1,4.2'),
            'Ø¹ÙÙ„ÙÙ‰+ÙƒÙ': (['Ø¹ÙÙ„ÙÙ‰', 'ÙƒÙ'], 'Ø¹.Ù„.Ùˆ', '1.1,4.2'),

            'Ø¥ÙÙ„ÙÙ‰+ÙƒÙ': (['Ø¥ÙÙ„ÙÙ‰', 'ÙƒÙ'], 'Ø¡.Ù„.ÙŠ', '1.1,4.2'),
            'Ø¥ÙÙ„ÙÙ‰+Ù‡Ù': (['Ø¥ÙÙ„ÙÙ‰', 'Ù‡Ù'], 'Ø¡.Ù„.ÙŠ', '1.1,4.2'),
            'Ø¥ÙÙ„ÙÙ‰+Ù‡Ø§': (['Ø¥ÙÙ„ÙÙ‰', 'Ù‡Ø§'], 'Ø¡.Ù„.ÙŠ', '1.1,4.2'),

            'Ù„Ù+Ù‡ÙÙ…': (['Ù„Ù', 'Ù‡ÙÙ…'], 'Ø­Ø±Ù', '1.1,4.2'),
            'Ù„Ù+ÙƒÙÙ…': (['Ù„Ù', 'ÙƒÙÙ…'], 'Ø­Ø±Ù', '1.1,4.2'),
            'Ù„Ù+Ù‡Ù': (['Ù„Ù', 'Ù‡Ù'], 'Ø­Ø±Ù', '1.1,4.2'),
            'Ù„Ù+Ù†Ø§': (['Ù„Ù', 'Ù†Ø§'], 'Ø­Ø±Ù', '1.1,4.2'),
            'Ù„Ù+Ù…Ø§': (['Ù„Ù', 'Ù…Ø§'], 'Ø­Ø±Ù', '1.1,2.4'),
            'Ù„Ù+Ù…ÙÙ†Ù’': (['Ù„Ù', 'Ù…ÙÙ†Ù’'], 'Ø­Ø±Ù', '1.1,2.4'),
            'Ù„Ù+Ø§Ù„ÙÙ‘Ø°ÙÙŠÙ†Ù': (['Ù„Ù', 'Ø§Ù„ÙÙ‘Ø°ÙÙŠÙ†Ù'], 'Ø¡.Ù„.Ø°', '1.1,2.4'),

            'Ø¨Ù+Ù‡Ø§': (['Ø¨Ù', 'Ù‡Ø§'], 'Ø­Ø±Ù', '1.1,4.2'),
            'Ø¨Ù+Ù‡Ù': (['Ø¨Ù', 'Ù‡Ù'], 'Ø­Ø±Ù', '1.1,4.2'),

            'Ø¹ÙÙ†Ù’+Ù‡ÙÙ…': (['Ø¹ÙÙ†Ù’', 'Ù‡ÙÙ…'], 'Ø­Ø±Ù', '1.1,4.2'),

            # Ø­Ø±Ù + ÙØ¹Ù„ + Ø¶Ù…ÙŠØ±
            'Ù‚Ø§Ù„+ÙÙˆØ§': (['Ù‚Ø§Ù„', 'ÙÙˆØ§'], 'Ù‚.Ùˆ.Ù„', '3.1,4.2'),
            'ÙƒØ§Ù†+ÙÙˆØ§': (['ÙƒØ§Ù†', 'ÙÙˆØ§'], 'Ùƒ.Ùˆ.Ù†', '3.1,4.2'),
            'ÙƒÙÙÙÙ‘Ø±+ÙÙˆØ§': (['ÙƒÙÙÙÙ‘Ø±', 'ÙÙˆØ§'], 'Ùƒ.Ù.Ø±', '3.1,4.2'),
            'ÙƒÙÙ†+ØªÙÙ…': (['ÙƒÙÙ†', 'ØªÙÙ…'], 'Ùƒ.Ùˆ.Ù†', '3.1,4.2'),

            'ÙˆÙ+Ù‚Ø§Ù„Ù': (['ÙˆÙ', 'Ù‚Ø§Ù„Ù'], 'Ù‚.Ùˆ.Ù„', '1.2,3.1'),
            'ÙˆÙ+ÙƒØ§Ù†Ù': (['ÙˆÙ', 'ÙƒØ§Ù†Ù'], 'Ùƒ.Ùˆ.Ù†', '1.2,3.1'),
            'ÙˆÙ+Ù‚Ø§Ù„+ÙÙˆØ§': (['ÙˆÙ', 'Ù‚Ø§Ù„', 'ÙÙˆØ§'], 'Ù‚.Ùˆ.Ù„', '1.2,3.1,4.2'),

            # Ø­Ø±Ù + Ø§Ø³ØªÙÙ‡Ø§Ù… + ÙØ¹Ù„
            'Ø¡Ù+Ø¢Ù…ÙÙ†+ÙÙˆØ§': (['Ø¡Ù', 'Ø¢Ù…ÙÙ†', 'ÙÙˆØ§'], 'Ø¡.Ù….Ù†', '1.7,3.1,4.2'),

            # Ø­Ø±Ù ØªØ¹Ø±ÙŠÙ + Ø§Ø³Ù…
            'Ø§Ù„+Ù„ÙÙ‘Ø°ÙÙŠÙ†Ù': (['Ø§Ù„', 'Ù„ÙÙ‘Ø°ÙÙŠÙ†Ù'], 'Ø¡.Ù„.Ø°', '1.5,2.4'),
            'Ø§Ù„+Ù„ÙÙ‘Ø°ÙÙŠ': (['Ø§Ù„', 'Ù„ÙÙ‘Ø°ÙÙŠ'], 'Ø¡.Ù„.Ø°', '1.5,2.4'),
            'Ø§Ù„+Ø£ÙØ±Ù’Ø¶': (['Ø§Ù„', 'Ø£ÙØ±Ù’Ø¶'], 'Ø¡.Ø±.Ø¶', '1.5,2.1'),
            'Ø§Ù„+Ù„Ù‘Ù°Ù‡': (['Ø§Ù„', 'Ù„Ù‘Ù°Ù‡'], 'Ø¡.Ù„.Ù‡', '1.5,2.2'),
            'Ø§Ù„+ÙƒÙØªØ§Ø¨': (['Ø§Ù„', 'ÙƒÙØªØ§Ø¨'], 'Ùƒ.Øª.Ø¨', '1.5,2.1'),
            'Ø§Ù„+Ø±ÙÙ‘Ø­Ù’Ù…Ù°Ù†': (['Ø§Ù„', 'Ø±ÙÙ‘Ø­Ù’Ù…Ù°Ù†'], 'Ø±.Ø­.Ù…', '1.5,2.1'),
            'Ø§Ù„+Ø±ÙÙ‘Ø­ÙÙŠÙ…': (['Ø§Ù„', 'Ø±ÙÙ‘Ø­ÙÙŠÙ…'], 'Ø±.Ø­.Ù…', '1.5,7.0'),
            'Ø§Ù„+Ø³ÙÙ‘Ù…Ø§Ø¡': (['Ø§Ù„', 'Ø³ÙÙ‘Ù…Ø§Ø¡'], 'Ø³.Ù….Ùˆ', '1.5,2.1'),
            'Ø§Ù„+Ø³ÙÙ‘Ù…Ø§ÙˆØ§Øª': (['Ø§Ù„', 'Ø³ÙÙ‘Ù…Ø§ÙˆØ§Øª'], 'Ø³.Ù….Ùˆ', '1.5,2.1'),
            'Ø§Ù„+Ù†Ù‘Ø§Ø³': (['Ø§Ù„', 'Ù†Ù‘Ø§Ø³'], 'Ø¡.Ù†.Ø³', '1.5,2.1'),
            'Ø§Ù„+Ù†Ù‘Ø§Ø±': (['Ø§Ù„', 'Ù†Ù‘Ø§Ø±'], 'Ù†.Ùˆ.Ø±', '1.5,2.1'),
            'Ø§Ù„+Ø­ÙÙ‚Ù‘': (['Ø§Ù„', 'Ø­ÙÙ‚Ù‘'], 'Ø­.Ù‚.Ù‚', '1.5,2.5'),
            'Ø§Ù„+Ø¹ÙØ°Ø§Ø¨': (['Ø§Ù„', 'Ø¹ÙØ°Ø§Ø¨'], 'Ø¹.Ø°.Ø¨', '1.5,2.5'),
            'Ø§Ù„+Ø¬ÙÙ†ÙÙ‘Ø©Ù': (['Ø§Ù„', 'Ø¬ÙÙ†ÙÙ‘Ø©Ù'], 'Ø¬.Ù†.Ù†', '1.5,2.1'),
            'Ø§Ù„+Ø¯ÙÙ‘Ù†Ù’ÙŠØ§': (['Ø§Ù„', 'Ø¯ÙÙ‘Ù†Ù’ÙŠØ§'], 'Ø¯.Ù†.Ùˆ', '1.5,2.1'),
            'Ø§Ù„+Ø¹ÙØ²ÙÙŠØ²': (['Ø§Ù„', 'Ø¹ÙØ²ÙÙŠØ²'], 'Ø¹.Ø².Ø²', '1.5,7.0'),
            'Ø§Ù„+Ø¸Ù‘Ø§Ù„ÙÙ…ÙÙŠÙ’Ù†Ù': (['Ø§Ù„', 'Ø¸Ù‘Ø§Ù„ÙÙ…ÙÙŠÙ’Ù†Ù'], 'Ø¸.Ù„.Ù…', '1.5,7.0'),
            'Ø§Ù„+Ø´ÙÙ‘ÙŠÙ’Ø·Ø§Ù†Ù': (['Ø§Ù„', 'Ø´ÙÙ‘ÙŠÙ’Ø·Ø§Ù†Ù'], 'Ø´.Ø·.Ù†', '1.5,2.1'),
            'Ø§Ù„+Ø­ÙÙŠØ§Ø©Ù': (['Ø§Ù„', 'Ø­ÙÙŠØ§Ø©Ù'], 'Ø­.ÙŠ.ÙŠ', '1.5,2.1'),

            # Ù…ØµØ¯Ø± + Ø¶Ù…ÙŠØ±
            'Ø¹ÙØ°Ø§Ø¨': (['Ø¹ÙØ°Ø§Ø¨'], 'Ø¹.Ø°.Ø¨', '2.5'),
            'Ø®ÙÙŠÙ’Ø±': (['Ø®ÙÙŠÙ’Ø±'], 'Ø®.ÙŠ.Ø±', '2.1'),
            'Ø®ÙÙ„Ù’Ù‚': (['Ø®ÙÙ„Ù’Ù‚'], 'Ø®.Ù„.Ù‚', '2.5'),

            # ØµÙØ©
            'Ø¹ÙÙ„ÙÙŠÙ…': (['Ø¹ÙÙ„ÙÙŠÙ…'], 'Ø¹.Ù„.Ù…', '7.0'),
            'Ø±ÙØ­ÙÙŠÙ…': (['Ø±ÙØ­ÙÙŠÙ…'], 'Ø±.Ø­.Ù…', '7.0'),
            'Ù…ÙØ¨ÙÙŠÙ†': (['Ù…ÙØ¨ÙÙŠÙ†'], 'Ø¨.ÙŠ.Ù†', '7.0'),

            # ÙØ¹Ù„ Ù…Ø¶Ø§Ø±Ø¹ Ù…Ø¹ Ø³Ø§Ø¨Ù‚Ø©
            'ÙŠÙ+Ø´Ø§Ø¡': (['ÙŠÙ', 'Ø´Ø§Ø¡'], 'Ø´.ÙŠ.Ø¡', '1.17,3.2'),
            'ÙŠÙ+Ø¤Ù’Ù…ÙÙ†+ÙÙˆÙ†Ù': (['ÙŠÙ', 'Ø¤Ù’Ù…ÙÙ†', 'ÙÙˆÙ†Ù'], 'Ø¡.Ù….Ù†', '1.17,3.2,4.2'),
            'ÙŠÙ+Ø¹Ù’Ù„ÙÙ…+ÙÙˆÙ†Ù': (['ÙŠÙ', 'Ø¹Ù’Ù„ÙÙ…', 'ÙÙˆÙ†Ù'], 'Ø¹.Ù„.Ù…', '1.17,3.2,4.2'),
            'ØªÙ+Ø¹Ù’Ù…ÙÙ„+ÙÙˆÙ†Ù': (['ØªÙ', 'Ø¹Ù’Ù…ÙÙ„', 'ÙÙˆÙ†Ù'], 'Ø¹.Ù….Ù„', '1.17,3.2,4.2'),

            # Ø­Ø±Ù ØªÙˆÙƒÙŠØ¯ + Ø¶Ù…ÙŠØ±
            'Ø¥ÙÙ†ÙÙ‘+Ù‡Ù': (['Ø¥ÙÙ†ÙÙ‘', 'Ù‡Ù'], 'Ø¡.Ù†.Ù†', '1.9,4.2'),
            'Ø¥ÙÙ†ÙÙ‘+Ù‡ÙÙ…': (['Ø¥ÙÙ†ÙÙ‘', 'Ù‡ÙÙ…'], 'Ø¡.Ù†.Ù†', '1.9,4.2'),
            'Ø£ÙÙ†ÙÙ‘+ÙÙŠ': (['Ø£ÙÙ†ÙÙ‘', 'ÙÙŠ'], 'Ø¡.Ù†.Ù†', '1.9,4.2'),
            'Ø£ÙÙ†ÙÙ‘+Ù†Ø§': (['Ø£ÙÙ†ÙÙ‘', 'Ù†Ø§'], 'Ø¡.Ù†.Ù†', '1.9,4.2'),

            # Ø­Ø±Ù + Ø¸Ø±Ù
            'ÙˆÙ+Ø¥ÙØ°Ø§': (['ÙˆÙ', 'Ø¥ÙØ°Ø§'], 'Ø¸Ø±Ù', '1.2,5.1'),
            'ÙÙ+Ø¥ÙØ°Ø§': (['ÙÙ', 'Ø¥ÙØ°Ø§'], 'Ø¸Ø±Ù', '1.2,5.1'),
            'ÙˆÙ+Ø¥ÙØ°Ù’': (['ÙˆÙ', 'Ø¥ÙØ°Ù’'], 'Ø¸Ø±Ù', '1.2,5.1'),
            'ÙÙ+ÙŠÙÙˆÙ’Ù…ÙØ¦ÙØ°Ù': (['ÙÙ', 'ÙŠÙÙˆÙ’Ù…ÙØ¦ÙØ°Ù'], 'ÙŠ.Ùˆ.Ù…', '1.2,5.1'),

            # Ø­Ø±Ù + Ø­Ø±Ù + Ø­Ø±Ù
            'ÙˆÙ+Ù„Ù+Ù‚ÙØ¯Ù’': (['ÙˆÙ', 'Ù„Ù', 'Ù‚ÙØ¯Ù’'], 'Ø­Ø±Ù', '1.2,1.9,1.9'),
            'Ø£+Ù„Ù‘Ø§': (['Ø£', 'Ù„Ù‘Ø§'], 'Ø­Ø±Ù', '1.7,1.10'),
            'Ø£Ù+Ù„ÙÙ…Ù’': (['Ø£Ù', 'Ù„ÙÙ…Ù’'], 'Ø­Ø±Ù', '1.7,1.4'),

            # Ø­Ø±Ù + Ø§Ø³Ù… + Ø¶Ù…ÙŠØ±
            'Ø£ÙÙ†Ù’ÙÙØ³Ù+Ù‡ÙÙ…': (['Ø£ÙÙ†Ù’ÙÙØ³Ù', 'Ù‡ÙÙ…'], 'Ù†.Ù.Ø³', '2.1,4.2'),

            # Ø¨Ù + Ø¢ÙŠØ§Øª + ÙÙŠ
            'Ø¨Ù+Ø¢ÙŠØ§Øª+ÙÙŠ': (['Ø¨Ù', 'Ø¢ÙŠØ§Øª', 'ÙÙŠ'], 'Ø¡.ÙŠ.ÙŠ', '1.1,2.1,4.2'),
            'Ø¨Ù+Ø¢ÙŠØ§Øª+Ù†Ø§': (['Ø¨Ù', 'Ø¢ÙŠØ§Øª', 'Ù†Ø§'], 'Ø¡.ÙŠ.ÙŠ', '1.1,2.1,4.2'),

            # Ø§Ø³Ù’ØªÙØ¬Ø§Ø¨+ÙÙˆØ§
            'Ø§Ø³Ù’ØªÙØ¬Ø§Ø¨+ÙÙˆØ§': (['Ø§Ø³Ù’ØªÙØ¬Ø§Ø¨', 'ÙÙˆØ§'], 'Ø¬.Ùˆ.Ø¨', '3.1,4.2'),

            # Ø¶Ù…ÙŠØ± Ù…Ù†ÙØµÙ„ + Ø­Ø±Ù Ø¹Ø·Ù
            'ÙˆÙ+Ù‡ÙÙˆÙ': (['ÙˆÙ', 'Ù‡ÙÙˆÙ'], 'Ø¶Ù…ÙŠØ±', '1.2,4.1'),
            'ÙˆÙ+Ù‡ÙÙ…': (['ÙˆÙ', 'Ù‡ÙÙ…'], 'Ø¶Ù…ÙŠØ±', '1.2,4.1'),

            # ÙƒÙ + Ø§Ø³Ù… Ø¥Ø´Ø§Ø±Ø©
            'ÙƒÙ+Ø°Ù°Ù„ÙÙƒÙ': (['ÙƒÙ', 'Ø°Ù°Ù„ÙÙƒÙ'], 'Ø§Ø³Ù… Ø¥Ø´Ø§Ø±Ø©', '1.21,2.3'),

            # Ù„ÙØ¹ÙÙ„ÙÙ‘ + Ø¶Ù…ÙŠØ±
            'Ù„ÙØ¹ÙÙ„ÙÙ‘+ÙƒÙÙ…': (['Ù„ÙØ¹ÙÙ„ÙÙ‘', 'ÙƒÙÙ…'], 'Ø¹.Ù„.Ù„', '1.9,4.2'),

            # Ø­Ø±Ù + Ù†Ø¯Ø§Ø¡ + Ø§Ø³Ù… + Ø­Ø±Ù ØªÙ†Ø¨ÙŠÙ‡
            'ÙŠØ§+Ø£ÙÙŠÙÙ‘+Ù‡Ø§': (['ÙŠØ§', 'Ø£ÙÙŠÙÙ‘', 'Ù‡Ø§'], 'Ø­Ø±Ù', '1.6,2.1,1.15'),
            'ÙŠØ§+Ø¹ÙÙŠØ³ÙÙ‰': (['ÙŠØ§', 'Ø¹ÙÙŠØ³ÙÙ‰'], 'NTWS', '1.6,2.2'),

            # ÙˆÙ + Ø­Ø±Ù + ÙˆØ­Ø±Ù
            'ÙˆÙ+Ù…ÙÙ†': (['ÙˆÙ', 'Ù…ÙÙ†'], 'Ø­Ø±Ù', '1.2,1.1'),
            'ÙÙ+Ù…ÙÙ†': (['ÙÙ', 'Ù…ÙÙ†'], 'Ø­Ø±Ù', '1.2,1.1'),

            # Ø¨ÙÙŠÙ’Ù†Ù + Ø¶Ù…ÙŠØ±
            'Ø¨ÙÙŠÙ’Ù†Ù+Ù‡ÙÙ…': (['Ø¨ÙÙŠÙ’Ù†Ù', 'Ù‡ÙÙ…'], 'Ø¨.ÙŠ.Ù†', '5.2,4.2'),

            # Ø­Ø±Ù Ø¬Ø± + ÙØ¹Ù„
            'Ù„Ù+ÙŠÙ': (['Ù„Ù', 'ÙŠÙ'], 'Ø­Ø±Ù', '1.1,1.17'),
            'Ù„Ù+Ù†ÙØµÙ’Ø±ÙÙ': (['Ù„Ù', 'Ù†ÙØµÙ’Ø±ÙÙ'], 'Øµ.Ø±.Ù', '1.1,3.2'),
            'Ù„Ù+Ù†ÙÙ†Ù’ØµÙØ±': (['Ù„Ù', 'Ù†ÙÙ†Ù’ØµÙØ±'], 'Ù†.Øµ.Ø±', '1.1,3.2'),
            'Ù„Ù+Ù†ÙØ«Ù’Ø¨ÙØª': (['Ù„Ù', 'Ù†ÙØ«Ù’Ø¨ÙØª'], 'Ø«.Ø¨.Øª', '1.1,3.2'),
            'Ù„Ù+ÙŠÙÙƒÙÙˆÙ†Ø§': (['Ù„Ù', 'ÙŠÙÙƒÙÙˆÙ†Ø§'], 'Ùƒ.Ùˆ.Ù†', '1.1,3.2'),

            # ÙƒÙÙ…Ø§
            'ÙƒÙÙ…Ø§': (['ÙƒÙÙ…Ø§'], 'Ø­Ø±Ù', '1.21,2.4'),

            # ÙˆÙ + Ù„Ù°ÙƒÙÙ†Ù’
            'ÙˆÙ+Ù„Ù°ÙƒÙÙ†Ù’': (['ÙˆÙ', 'Ù„Ù°ÙƒÙÙ†Ù’'], 'Ø­Ø±Ù', '1.2,1.18'),
            'ÙˆÙ+Ø¥ÙÙ†Ù’': (['ÙˆÙ', 'Ø¥ÙÙ†Ù’'], 'Ø­Ø±Ù', '1.2,1.4'),
            'ÙˆÙ+Ù„ÙÙˆÙ’': (['ÙˆÙ', 'Ù„ÙÙˆÙ’'], 'Ø­Ø±Ù', '1.2,1.4'),
            'ÙˆÙ+Ù„Ù+Ù‚ÙØ¯Ù’': (['ÙˆÙ', 'Ù„Ù', 'Ù‚ÙØ¯Ù’'], 'Ø­Ø±Ù', '1.2,1.9,1.9'),

            # Ø£ + ÙÙ + ØµÙŠØºØ©
            'Ø£+ÙÙ+ØºÙÙŠÙ’Ø±Ù': (['Ø£', 'ÙÙ', 'ØºÙÙŠÙ’Ø±Ù'], 'Øº.ÙŠ.Ø±', '1.7,1.2,2.1'),

            # Ø­Ø§Ø§Ù„Ø§Øª Ø£Ø®Ø±Ù‰
            'ÙˆÙ+Ø¨Ù+Ø§Ù„+ÙˆØ§Ù„ÙØ¯+ÙÙŠÙ’Ù†': (['ÙˆÙ', 'Ø¨Ù', 'Ø§Ù„', 'ÙˆØ§Ù„ÙØ¯', 'ÙÙŠÙ’Ù†'], 'Ùˆ.Ù„.Ø¯', '1.2,1.1,1.5,2.1,4.2'),
        }

    def correct_compound(self, word: str, root: str) -> Tuple[str, str, str]:
        """ØªØµØ­ÙŠØ­ Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙƒØ¨Ø©"""

        if word in self.compound_corrections:
            morphemes, new_root, tags = self.compound_corrections[word]
            return ('+'.join(morphemes), new_root, tags)

        return (word, root, '6.1')


def apply_detailed_correction(batch_num: int):
    """ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØµØ­ÙŠØ­ Ø§Ù„Ù…ÙØµÙ„"""

    filename = f'final/final_{batch_num:02d}.json'

    with open(filename, 'r', encoding='utf-8') as f:
        data = json.load(f)

    corrector = DetailedManualCorrector()
    corrected_data = []

    for entry in data:
        word = entry[0]
        root = entry[1]
        tag = entry[2] if len(entry) > 2 else '6.1'

        corrected_word, corrected_root, corrected_tag = corrector.correct_compound(word, root)

        # Ø¥Ø°Ø§ ØªÙ… Ø§Ù„ØªØµØ­ÙŠØ­ (ØªØºÙŠØ±Øª Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)
        if corrected_tag != '6.1' or word != corrected_word:
            corrected_data.append([corrected_word, corrected_root, corrected_tag])
        else:
            corrected_data.append([word, root, tag])

    with open(filename, 'w', encoding='utf-8') as f:
        json.dump(corrected_data, f, ensure_ascii=False, indent=2)

    return len(corrected_data)


# ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØµØ­ÙŠØ­ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª
print("ğŸ” Ø¬Ø§Ø±ÙŠ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØµØ­ÙŠØ­ Ø§Ù„Ù…ÙØµÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù„ÙØ§Øª...")
for i in range(1, 16):
    count = apply_detailed_correction(i)
    print(f"âœ“ ØªØµØ­ÙŠØ­ final_{i:02d}.json ({count} ÙƒÙ„Ù…Ø©)")

print("\nâœ“ Ø§ÙƒØªÙ…Ù„Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØµØ­ÙŠØ­Ø§Øª Ø§Ù„Ù…ÙØµÙ„Ø©")
