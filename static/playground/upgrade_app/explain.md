# ๐ ุดุฑุญ ุฎุทุฉ ุงูุชุญุฏูุซ - Mishkah Lab UI Reorganization

## ๐ฏ ุงููุฏู ุงูุนุงู ูู ุงูุชุญุฏูุซ

ูุฐุง ุงูุชุญุฏูุซ **ููุณ ุฅุถุงูุฉ ููุฒุงุช ุฌุฏูุฏุฉ**ุ ุจู ูู **ุฅุนุงุฏุฉ ุชูุธูู ุดุงููุฉ** ูููุงุฌูุฉ ูุฌุนููุง ุฃูุซุฑ ููุทููุฉ ูุณูููุฉ ูู ุงูุงุณุชุฎุฏุงู. ูุญู ูุนูุฏ ุชุฑุชูุจ ุงูุฃุฒุฑุงุฑ ูุชูุฒูุนูุง ุญุณุจ ูุธููุชูุง ุงูุญููููุฉุ ููุถูู ูุธุงู tabs ูููุนุงููุฉ ุจุฏูุงู ูู iframe ุจุณูุท.

---

## ๐งฉ ุงููุดููุฉ ุงูุญุงููุฉ

### 1. **ุงูุฃุฒุฑุงุฑ ูู ุฃูุงูู ุบูุฑ ููุทููุฉ**

ุญุงููุงูุ ูู ุงูุฃุฒุฑุงุฑ ููุฌูุฏุฉ ูู **Toolbar** (ุงูุดุฑูุท ุงูุนููู):
- โ๏ธ Add Example
- โ๏ธ Edit Example  
- โฌ๏ธ Download JSON
- โฌ๏ธ Import JSON
- โฉ๏ธ Reset Code

**ุงููุดููุฉ:** ูุฐู ุฃุฒุฑุงุฑ **ุนุงูุฉ** ุชุฎุต ุงูููุฏููู ูููุ ููุณ ููุง ุนูุงูุฉ ุจุงููframework ุงูุญุงูู ุฃู ุงูููุฏ ุงูููุชูุญ. ูุฌูุฏูุง ูู Toolbar ูุฌุนู ุงููุงุฌูุฉ ูุฒุฏุญูุฉ ููุฑุจูุฉ.

### 2. **ููุทูุฉ Preview ุจุณูุทุฉ ุฌุฏุงู**

ุญุงููุงูุ ููุทูุฉ ุงููุนุงููุฉ (Preview) ูู **iframe ูุงุญุฏ ููุท** ูุนุฑุถ ูุชูุฌุฉ ุงูููุฏ.

**ุงููุดููุฉ:** ูุง ุชูุฌุฏ ุทุฑููุฉ ูุนุฑุถ:
- ุดุฑุญ ุงูููุฏ (Code Wiki)
- ูุนูููุงุช ุนู ุงููุซุงู (Example Info)
- ุงููุซุงุฆู ุงููุงููุฉ (Full Wiki)

### 3. **ุนุฏู ูุฌูุฏ History ููููุฏ**

ุนูุฏ ุชุนุฏูู ุงูููุฏุ ูุง ููุฌุฏ ุณุฌู ููุชุนุฏููุงุช ุงูุณุงุจูุฉ.

**ุงููุดููุฉ:** ุฅุฐุง ุฃุฎุทุฃุช ุฃู ุฃุฑุฏุช ุงูุฑุฌูุน ููุณุฎุฉ ูุฏููุฉุ ูุง ููููู ุฐูู ุฅูุง ุจุงูุถุบุท ุนูู "Reset" ุงููู ุจูุฑุฌุน ููุฃุตูู ุชูุงูุงู.

### 4. **ูุดููุฉ IndexedDB**

ุฃุญูุงูุงู IndexedDB ุจูุชุนูู ููุฎุฑุจ ุงูุจูุงูุงุช.

**ุงููุดููุฉ:** ุงูุญู ุงููุญูุฏ ุญุงููุงู ูู ูุชุญ DevTools โ Application โ Clear Site Data. ูุญุชุงุฌ ุฒุฑ **Reset All** ุณูู.

---

## โจ ุงูุญู ุงูููุชุฑุญ

### ๐ **1. ุฅุนุงุฏุฉ ุชูุฒูุน ุงูุฃุฒุฑุงุฑ ุญุณุจ ุงููุธููุฉ**

ููุณู ุงูุฃุฒุฑุงุฑ ุฅูู **3 ููุงุทู ููุทููุฉ**:

#### **ุฃ) Sidebar Footer** - ุงูุฃุฒุฑุงุฑ ุงูุนุงูุฉ
ุงูุฃุฒุฑุงุฑ ุงููู ุชุฎุต **ุฅุฏุงุฑุฉ ุงูุฃูุซูุฉ ูุงูุฅุนุฏุงุฏุงุช**:
- โ Add Example
- โ๏ธ Edit Example
- โฌ๏ธ Download JSON
- โฌ๏ธ Import JSON
- โ๏ธ/๐ Theme Toggle
- EN/ุนุฑ Language Toggle
- ๐ Reset All (ุฌุฏูุฏ)

**ุงูุณุจุจ:** ูุฐู ุฃุฒุฑุงุฑ **ุนุงูุฉ** - ุชุดุชุบู ูู ุฃู ููุช ุจุบุถ ุงููุธุฑ ุนู ุงููุซุงู ุฃู Framework ุงูููุชูุญ. ูุถุนูุง ูู Sidebar Footer ุฃูุณุจ ูุฃููุง ูุชุงุญุฉ ุฏุงุฆูุงู ูุบูุฑ ูุฒุนุฌุฉ.

#### **ุจ) Toolbar (Code Actions)** - ุฃุฒุฑุงุฑ ุงูููุฏ
ุงูุฃุฒุฑุงุฑ ุงููู ุชุฎุต **ุงูููุฏ ุงูุญุงูู ุงูููุชูุญ**:
- โฉ๏ธ Reset Code (ููุฌูุฏ ุฃุตูุงู)
- ๐พ Save as Standard (ุฌุฏูุฏ)
- ๐ History (ุฌุฏูุฏ)

**ุงูุณุจุจ:** ูุฐู ุฃุฒุฑุงุฑ **ุฎุงุตุฉ ุจุงูููุฏ** - ุชุดุชุบู ุนูู ุงูููุฏ ุงูููุชูุญ ุญุงููุงู. ูุถุนูุง ุจุฌุงูุจ Framework tabs ููุทูู ูุฃููุง ูุฑุชุจุทุฉ ุจุงููeditor.

#### **ุฌ) Preview Pane (Tabs)** - ุฃุฒุฑุงุฑ ุงููุนุงููุฉ
ุงูุฃุฒุฑุงุฑ ุงููู ุชุฎุต **ุนุฑุถ ุงููุญุชูู**:
- โถ๏ธ Execute (iframe - ููุฌูุฏ ุฃุตูุงู)
- ๐ Code Wiki (ุฌุฏูุฏ)
- โน๏ธ Example Info (ุฌุฏูุฏ)
- ๐ Full Wiki (ุฌุฏูุฏ)

**ุงูุณุจุจ:** ูุฐู ุฃุฒุฑุงุฑ **tabs** - ุชุบูุฑ ุงููุญุชูู ุงููุนุฑูุถ ูู ููุณ ุงูููุทูุฉ. ูุฌูุฏูุง ุฏุงุฎู Preview Pane ููุณูุง ุฃูุถุญ.

---

### ๐ **2. ูุธุงู Preview Tabs**

ุจุฏูุงู ูู iframe ูุงุญุฏุ ูุนูู **4 tabs**:

#### **Tab 1: Execute** (ููุฌูุฏ ุฃุตูุงู)
- ุนุฑุถ ูุชูุฌุฉ ุงูููุฏ ูู iframe
- ูุฐุง ูู ุงูุณููู ุงูุญุงูู ุจุฏูู ุชุบููุฑ

#### **Tab 2: Code Wiki** (ุฌุฏูุฏ)
- ุนุฑุถ ุดุฑุญ ุงูููุฏ ุงูุฎุงุต ุจุงููframework ุงูุญุงูู
- ุงุณุชุฎุฏุงู `M.UI.WikiMini` component
- ูุฃุฎุฐ `wikiId` ูู `implementation.wikiId`
- ูุซุงู: ุดุฑุญ ููููุฉ ุนูู Counter ูู Vue.js

#### **Tab 3: Example Info** (ุฌุฏูุฏ)
- ุนุฑุถ ูุนูููุงุช ุนู ุงููุซุงู ููุณู
- ุงุณุชุฎุฏุงู `M.UI.WikiMini` component
- ูุฃุฎุฐ `wikiId` ูู `example.wikiId`
- ูุซุงู: ุดุฑุญ ููุฑุฉ Counter ุนูููุงู ุจุบุถ ุงููุธุฑ ุนู Framework

#### **Tab 4: Full Wiki** (ุฌุฏูุฏ)
- ุนุฑุถ ุงููุซุงุฆู ุงููุงููุฉ ูุน ููุงุฆู ูุจุญุซ
- ุงุณุชุฎุฏุงู `M.UI.WikiViewer` component
- ูููุณุชุฎุฏููู ุงููู ุนุงูุฒูู ูุชุตูุญูุง ุงููุซุงุฆู ูุงููุฉ

**ููุงุญุธุฉ:** `M.UI.WikiMini` ุนูุตุฑ ุฌุฏูุฏ ูู ูุชู ุงุฎุชุจุงุฑู ุจุนุฏ. ููุชุฑุถ ุฅูู ูุฃุฎุฐ `wikiId` ู `lang` ููุนุฑุถ ุงูููุงู ุจุฌุฐูุฑู ูุงุฑุชุจุงุทุงุชู.

---

### ๐ **3. ููุฒุฉ Save as Standard**

#### **ุงููุดููุฉ ุงูุญุงููุฉ:**
ุงูููุฏ ุงููุนุฏู ููุญูุธ ูู `userCode` ูููุตู ุนู ุงูููุฏ ุงูุฃุตูู `code`. ูู ุนุงูุฒ ุชุญูุธ ุงูุชุนุฏููุงุช ูู"ุฃุตูู ุฌุฏูุฏ"ุ ูุงููุด ุทุฑููุฉ.

#### **ุงูุญู:**
ุฒุฑ **๐พ Save as Standard**:
1. ูุงุฎุฏ ุงูููุฏ ุงูุญุงูู ูู `state.code`
2. ูุณุชุจุฏู `example.code[framework]` ุจูู
3. ููุณุญ `example.userCode[framework]`
4. ูุญูุธ ูู IndexedDB

**ุงููุชูุฌุฉ:** ุงูููุฏ ุงููุนุฏู ูุตุจุญ ูู ุงูุฃุตููุ ูุฒุฑ Reset ูุฎุชูู.

---

### ๐ **4. ููุฒุฉ Code History**

#### **ุงููุดููุฉ ุงูุญุงููุฉ:**
ููุง ุชุนุฏู ุงูููุฏุ ูุงููุด ุณุฌู. ูู ุนููุช ุฎุทุฃุ ุงูุญู ุงููุญูุฏ Reset ููุฃุตูู ุชูุงูุงู.

#### **ุงูุญู:**
ูุธุงู **History** ุจุณูุท:

**ุฃ) ุญูุธ ุชููุงุฆู ููHistory:**
- ูู `autoSave` functionุ ูู ูุง ุงูููุฏ ูุชุบูุฑ:
  ```javascript
  codeHistory.push({
      timestamp: Date.now(),
      code: code,
      framework: framework,
      example: exampleId
  });
  ```
- ูุญุชูุธ ุจุขุฎุฑ **20 ุชุนุฏูู** ููุท (trim)

**ุจ) ุฒุฑ History:**
- ุฒุฑ **๐** ูู Toolbar
- ููุง ุชุถุบุทูุ ููุชุญ modal ุจุณูุท
- Modal ูุนุฑุถ ูุงุฆูุฉ ุจุงูุชุนุฏููุงุช (ุงูุชุงุฑูุฎุ Frameworkุ Example)
- ูู ุชุนุฏูู ุนูุฏู ุฒุฑ **"ุงุณุชุฑุฌุงุน"**

**ุฌ) ุงุณุชุฑุฌุงุน:**
- ููุง ุชุถุบุท "ุงุณุชุฑุฌุงุน" ุนูู ุฃู ุชุนุฏูู:
  - ูุฑุฌุน ุงูููุฏ ููุฐู ุงููุณุฎุฉ
  - ูุญุฏุซ CodeMirror
  - ูุญุฏุซ Preview

**ุงููุชูุฌุฉ:** ุชูุฏุฑ ุชุฑุฌุน ูุฃู ูุณุฎุฉ ูุฏููุฉ ูู ุงูููุฏ ุจุณูููุฉ.

---

### ๐ **5. ุฒุฑ Reset All**

#### **ุงููุดููุฉ:**
IndexedDB ุฃุญูุงูุงู ุจูุชุนูู ุฃู ูุฎุฑุจ ุงูุจูุงูุงุช. ุงูุญู ุงููุญูุฏ:
1. F12 โ Application
2. Clear Site Data
3. Reload

#### **ุงูุญู:**
ุฒุฑ **๐ Reset All** ูู Sidebar Footer:
```javascript
await dbAdapter.clear();
localStorage.clear();
window.location.reload();
```

**ุงููุชูุฌุฉ:** ูุณุญ ูู ุงูุจูุงูุงุช ูุฅุนุงุฏุฉ ุงูุชุดุบูู ุจุถุบุทุฉ ูุงุญุฏุฉ.

---

## ๐๏ธ ููุฎุต ุงูุชุบููุฑุงุช ุงูุชูููุฉ

### **State ุงูุฌุฏูุฏ:**
```javascript
activePreviewTab: 'execute',  // 'execute' | 'code-wiki' | 'example-info' | 'full-wiki'
showHistoryModal: false,
codeHistory: []  // Array of { timestamp, code, framework, example }
```

### **Handlers ุงูุฌุฏูุฏุฉ:**
1. `preview.tab.switch` - ุชุจุฏูู tabs ูู Preview
2. `code.save_as_standard` - ุญูุธ ุงูููุฏ ููstandard
3. `code.history.show` - ูุชุญ History modal
4. `code.history.restore` - ุงุณุชุฑุฌุงุน ูู History
5. `code.history.close` - ุฅุบูุงู History modal
6. `app.reset` - ูุณุญ ูู ุงูุจูุงูุงุช

### **Components ูุนุฏูุฉ:**
1. **Sidebar** - ุฅุถุงูุฉ Footer ูุน ูู ุงูุฃุฒุฑุงุฑ ุงูุนุงูุฉ
2. **Toolbar** - ุฅุฒุงูุฉ ุงูุฃุฒุฑุงุฑ ุงูุนุงูุฉ + ุฅุถุงูุฉ ุฃุฒุฑุงุฑ ุงูููุฏ
3. **PreviewPane** - ุงุณุชุจุฏุงู ูุงูู ุจูุธุงู tabs
4. **HistoryModal** - component ุฌุฏูุฏ

### **Functions ูุนุฏูุฉ:**
1. **autoSave** - ุฅุถุงูุฉ ุญูุธ ููhistory

---

## ๐ ุณูุฑ ุงูุนูู ุงูุฌุฏูุฏ

### **ุณููุงุฑูู 1: ุงููุณุชุฎุฏู ููุชุญ ูุซุงู**
1. ูุฎุชุงุฑ ุงููุซุงู ูู Sidebar
2. ูุฎุชุงุฑ Framework ูู Toolbar tabs
3. ูุนุฏู ุงูููุฏ ูู Editor
4. **ุชููุงุฆูุงู:**
   - ุงูููุฏ ููุญูุธ ูู `userCode`
   - ููุถุงู ููhistory
   - Preview ูุชุญุฏุซ
5. **ููุฏุฑ:**
   - ูุถุบุท โถ๏ธ ูุชุญุฏูุซ Preview ูุฏููุงู
   - ูุถุบุท ๐ ููุชุญ History
   - ูุถุบุท โฉ๏ธ ููุฑุฌูุน ููุฃุตูู
   - ูุถุบุท ๐พ ูุญูุธ ููstandard

### **ุณููุงุฑูู 2: ุงููุณุชุฎุฏู ูุนุฑุถ ุงูุดุฑุญ**
1. ูู Preview Paneุ ูุถุบุท ุนูู **๐ Code Wiki**
2. ูุธูุฑ ูู ุดุฑุญ ุงูููุฏ (WikiMini)
3. ููุฏุฑ ูุถุบุท **โน๏ธ Example Info** ูุนุฑุถ ูุนูููุงุช ุงููุซุงู
4. ููุฏุฑ ูุถุบุท **๐ Full Wiki** ูููุซุงุฆู ุงููุงููุฉ
5. ูุฑุฌุน ูู **โถ๏ธ Execute** ูุนุฑุถ ุงููุชูุฌุฉ

### **ุณููุงุฑูู 3: ุงููุณุชุฎุฏู ูุงุฌู ูุดููุฉ ูู IndexedDB**
1. ูุถุบุท **๐ Reset All** ูู Sidebar Footer
2. Confirm dialog ูุธูุฑ
3. ูุถุบุท OK
4. ูู ุงูุจูุงูุงุช ุชููุณุญ ูุงูุตูุญุฉ ุชูุนุงุฏ ุชุญููููุง

---

## ๐ ููุงุฑูุฉ ูุจู/ุจุนุฏ

### **ูุจู ุงูุชุญุฏูุซ:**

```
โโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Sidebar    โ Toolbar (ูุฒุฏุญู!)                        โ
โ             โ [Fw1][Fw2][Fw3]  [Reset][Add][Edit]     โ
โ Examples    โ          [โฌ๏ธ][โฌ๏ธ][โถ Run]                 โ
โ - Counter   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ - Form      โ                                          โ
โ - ...       โ         Editor (CodeMirror)              โ
โ             โ                                          โ
โ [โ๏ธ Theme]  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ [๐ Lang]   โ                                          โ
โ             โ         Preview (iframe only)            โ
โโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### **ุจุนุฏ ุงูุชุญุฏูุซ:**

```
โโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Sidebar    โ Toolbar (ูุธูู!)                         โ
โ             โ [Fw1][Fw2][Fw3]  [โฉ๏ธ][๐พ][๐]            โ
โ Examples    โ                              [โถ Run]     โ
โ - Counter   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ - Form      โ                                          โ
โ - ...       โ         Editor (CodeMirror)              โ
โ             โ                                          โ
โ โโโโโโโโโโโ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ โFooter   โ โ Preview Tabs                             โ
โ โโ Add   โ โ [โถ๏ธ Execute][๐ Code][โน๏ธ Info][๐ Wiki]  โ
โ โโ๏ธ Edit  โ โ                                          โ
โ โโฌ๏ธโฌ๏ธ     โ โ         Content Area                     โ
โ โโ๏ธ EN    โ โ    (iframe / WikiMini / WikiViewer)      โ
โ โ๐ Reset โ โ                                          โ
โ โโโโโโโโโโโ โ                                          โ
โโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ ูููุจุฑูุฌ

### **1. ูุฐุง ููุณ ููุทู ุฌุฏูุฏ**
ูู ุงูุชุนุฏููุงุช ูู **ููู ูุชุฑุชูุจ**. ูุงููุด business logic ุฌุฏูุฏ ุตุนุจ. ููุท:
- ููู ุฃุฒุฑุงุฑ ูู ููุงู ูููุงู
- ุฅุถุงูุฉ state fields ุจุณูุทุฉ
- ุฅุถุงูุฉ handlers ุจุณูุทุฉ ููุชุญูู

### **2. WikiMini ุฌุฏูุฏ ููู ูุชู ุงุฎุชุจุงุฑู**
ุงูุชุฑุถูุง ุฅู `M.UI.WikiMini` ููุฌูุฏ ููุฃุฎุฐ:
```javascript
M.UI.WikiMini({
    wikiId: 'some-id',
    lang: 'ar' // or 'en'
})
```

**ูู ูุด ููุฌูุฏ:**
- ูุณุชุจุฏูู ุจู `D.Text.P` ูุคูุชุงู
- ุฃู ูุนุฑุถ ุฑุณุงูุฉ "ูุฑูุจุงู"

### **3. wikiId ูู ุงูุจูุงูุงุช**
ุงูุชุทุจูู ูุชููุน:
```javascript
example = {
    id: 'counter',
    wikiId: 'counter-example-wiki',  // โ ุฌุฏูุฏ
    implementations: [
        {
            framework: 'vue',
            code: '...',
            wikiId: 'counter-vue-wiki'  // โ ุฌุฏูุฏ
        }
    ]
}
```

**ูู ูุด ููุฌูุฏ:** ุงูtabs ุชุฎุชูู ุชููุงุฆูุงู (ุดูู ุงูููุฏ: `codeWikiId ? ... : null`)

### **4. ูุง ุชุณุชุฎุฏู replace_file_content**
ุงูููู ูุจูุฑ (1000+ ุณุทุฑ). ุฃุฏุงุฉ `replace_file_content` **ูุงุดูุฉ** ูุน ุงููููุงุช ุงููุจูุฑุฉ.

**ุงุณุชุฎุฏู:**
- ุงูุชุนุฏูู ุงููุฏูู (ุงูุฃูุถู)
- ุฃู `multi_replace_file_content` (ุฃูู ุณูุก)

### **5. Backup ุฅูุฒุงูู**
ูุจู ุฃู ุชุนุฏูู:
```bash
cp app.js app.js.backup-$(date +%Y%m%d-%H%M%S)
```

---

## ๐ฏ ุงูุฎูุงุตุฉ

**ูุง ููุนูู:**
- โ **ูุนูุฏ ุชูุธูู** ุงูุฃุฒุฑุงุฑ ูู ุฃูุงูู ููุทููุฉ
- โ **ูุถูู ูุธุงู tabs** ูููุนุงููุฉ (Execute / Wiki / Info)
- โ **ูุถูู History** ููููุฏ
- โ **ูุถูู Save as Standard** ูุญูุธ ุงูุชุนุฏููุงุช
- โ **ูุถูู Reset All** ูุญู ูุดุงูู IndexedDB

**ูุง ูุง ููุนูู:**
- โ ููุณ business logic ุฌุฏูุฏ ูุนูุฏ
- โ ููุณ refactoring ุนููู
- โ ููุณ ุชุบููุฑ ูู ุงูุจููุฉ ุงูุฃุณุงุณูุฉ

**ุงููุชูุฌุฉ:**
ูุงุฌูุฉ **ุฃูุซุฑ ููุทููุฉ**ุ **ุฃุณูู ููุงุณุชุฎุฏุงู**ุ **ุฃูู ุงุฒุฏุญุงูุงู**ุ ูุน **ููุฒุงุช ูุณุงุนุฏุฉ** (History, Reset).

---

**ุจุงูุชูููู! ๐**
