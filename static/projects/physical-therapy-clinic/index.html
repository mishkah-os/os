<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø¹ÙŠØ§Ø¯Ø§Øª Ø¯ÙƒØªÙˆØ±Ø© Ù…Ø±ÙˆØ© Ø­Ø³ÙŠÙ† Ù„Ù„Ø¹Ù„Ø§Ø¬ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ | Dr. Marwa Hussein Physical Therapy Clinics</title>
  <meta name="description" content="Ø¹ÙŠØ§Ø¯Ø§Øª Ù…ØªØ®ØµØµØ© ÙÙŠ Ø§Ù„Ø¹Ù„Ø§Ø¬ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ£Ù‡ÙŠÙ„ | Specialized Physical Therapy and Rehabilitation Clinics">
  <link rel="stylesheet" href="css/styles.css">
  <!-- Load Mishkah Libraries -->
  <script src="../../lib/mishkah-utils.js"></script>
  <script src="../../lib/mishkah.core.js"></script>
  <script src="../../lib/mishkah-ui.js"></script>
</head>
<body>
  <div id="app"></div>

  <!-- Main Application Script -->
  <script>
    (async function() {
      const M = Mishkah;
      const D = M.DSL;
      const UI = M.UI;

      // Application State
      const db = {
        env: {
          lang: 'ar',
          dir: 'rtl',
          theme: 'light'
        },
        data: {
          currentPage: 'home',
          showBookingForm: false,
          services: [
            {
              id: 1,
              name_ar: 'Ø§Ù„Ø¹Ù„Ø§Ø¬ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ Ù„Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„ÙÙ‚Ø±ÙŠ',
              name_en: 'Spinal Physical Therapy',
              description_ar: 'Ø¹Ù„Ø§Ø¬ Ù…ØªØ®ØµØµ Ù„Ø¢Ù„Ø§Ù… Ø§Ù„Ø¸Ù‡Ø± ÙˆØ§Ù„Ø±Ù‚Ø¨Ø© ÙˆØªØµØ­ÙŠØ­ Ø§Ù„Ù‚ÙˆØ§Ù…',
              description_en: 'Specialized treatment for back and neck pain and posture correction',
              icon: 'ğŸ¦´'
            },
            {
              id: 2,
              name_ar: 'Ø§Ù„Ø¹Ù„Ø§Ø¬ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ Ù„Ù„Ù…ÙØ§ØµÙ„',
              name_en: 'Joint Physical Therapy',
              description_ar: 'Ø¹Ù„Ø§Ø¬ Ø§Ù„ØªÙ‡Ø§Ø¨Ø§Øª Ø§Ù„Ù…ÙØ§ØµÙ„ ÙˆØ¥ØµØ§Ø¨Ø§Øª Ø§Ù„Ø£Ø±Ø¨Ø·Ø©',
              description_en: 'Treatment of arthritis and ligament injuries',
              icon: 'ğŸ¦µ'
            },
            {
              id: 3,
              name_ar: 'Ø§Ù„Ø¹Ù„Ø§Ø¬ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠ',
              name_en: 'Sports Physical Therapy',
              description_ar: 'ØªØ£Ù‡ÙŠÙ„ Ø§Ù„Ø¥ØµØ§Ø¨Ø§Øª Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ© ÙˆØ§Ù„ÙˆÙ‚Ø§ÙŠØ© Ù…Ù†Ù‡Ø§',
              description_en: 'Sports injury rehabilitation and prevention',
              icon: 'âš½'
            },
            {
              id: 4,
              name_ar: 'Ø§Ù„Ø¹Ù„Ø§Ø¬ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ Ù„Ù„Ø£Ø·ÙØ§Ù„',
              name_en: 'Pediatric Physical Therapy',
              description_ar: 'Ø¹Ù„Ø§Ø¬ Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù†Ù…Ùˆ Ø§Ù„Ø­Ø±ÙƒÙŠ Ø¹Ù†Ø¯ Ø§Ù„Ø£Ø·ÙØ§Ù„',
              description_en: 'Treatment of developmental motor problems in children',
              icon: 'ğŸ‘¶'
            },
            {
              id: 5,
              name_ar: 'Ø§Ù„Ø¹Ù„Ø§Ø¬ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ Ù„ÙƒØ¨Ø§Ø± Ø§Ù„Ø³Ù†',
              name_en: 'Geriatric Physical Therapy',
              description_ar: 'Ø¹Ù„Ø§Ø¬ Ø®Ø§Øµ Ù„ÙƒØ¨Ø§Ø± Ø§Ù„Ø³Ù† Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø­Ø±ÙƒØ© ÙˆØ§Ù„ØªÙˆØ§Ø²Ù†',
              description_en: 'Special treatment for elderly to improve mobility and balance',
              icon: 'ğŸ‘´'
            },
            {
              id: 6,
              name_ar: 'Ø§Ù„Ø¹Ù„Ø§Ø¬ Ø¨Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„Ø¹Ù„Ø§Ø¬ÙŠØ©',
              name_en: 'Therapeutic Exercise',
              description_ar: 'Ø¨Ø±Ø§Ù…Ø¬ ØªÙ…Ø§Ø±ÙŠÙ† Ù…Ø®ØµØµØ© Ù„ÙƒÙ„ Ø­Ø§Ù„Ø©',
              description_en: 'Customized exercise programs for each case',
              icon: 'ğŸ‹ï¸'
            }
          ],
          doctors: [
            {
              id: 1,
              name_ar: 'Ø¯. Ù…Ø±ÙˆØ© Ø­Ø³ÙŠÙ†',
              name_en: 'Dr. Marwa Hussein',
              specialization_ar: 'Ø£Ø®ØµØ§Ø¦ÙŠØ© Ø§Ù„Ø¹Ù„Ø§Ø¬ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ£Ù‡ÙŠÙ„',
              specialization_en: 'Physical Therapy and Rehabilitation Specialist',
              experience: 15,
              bio_ar: 'Ø®Ø¨Ø±Ø© 15 Ø¹Ø§Ù…Ø§Ù‹ ÙÙŠ Ù…Ø¬Ø§Ù„ Ø§Ù„Ø¹Ù„Ø§Ø¬ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ£Ù‡ÙŠÙ„ØŒ Ø­Ø§ØµÙ„Ø© Ø¹Ù„Ù‰ Ø¯ÙƒØªÙˆØ±Ø§Ù‡ ÙÙŠ Ø§Ù„Ø¹Ù„Ø§Ø¬ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ',
              bio_en: '15 years of experience in physical therapy and rehabilitation, PhD holder in Physical Therapy',
              image: 'images/doctor-1.jpg'
            }
          ],
          bookingForm: {
            firstName: '',
            lastName: '',
            phone: '',
            email: '',
            serviceId: '',
            preferredDate: '',
            preferredTime: '',
            notes: ''
          },
          testimonials: [
            {
              id: 1,
              name_ar: 'Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯',
              name_en: 'Ahmed Mohamed',
              text_ar: 'ØªØ¬Ø±Ø¨Ø© Ø±Ø§Ø¦Ø¹Ø© Ù…Ø¹ Ø§Ù„Ø¯ÙƒØªÙˆØ±Ø© Ù…Ø±ÙˆØ©ØŒ Ø¹Ù„Ø§Ø¬ Ø§Ø­ØªØ±Ø§ÙÙŠ ÙˆÙ†ØªØ§Ø¦Ø¬ Ù…Ù…ØªØ§Ø²Ø©',
              text_en: 'Wonderful experience with Dr. Marwa, professional treatment and excellent results',
              rating: 5
            },
            {
              id: 2,
              name_ar: 'ÙØ§Ø·Ù…Ø© Ø¹Ù„ÙŠ',
              name_en: 'Fatima Ali',
              text_ar: 'Ø£ÙØ¶Ù„ Ø¹ÙŠØ§Ø¯Ø© Ø¹Ù„Ø§Ø¬ Ø·Ø¨ÙŠØ¹ÙŠ Ø¬Ø±Ø¨ØªÙ‡Ø§ØŒ ÙØ±ÙŠÙ‚ Ù…ØªØ¹Ø§ÙˆÙ† ÙˆØ®Ø¯Ù…Ø© Ù…ØªÙ…ÙŠØ²Ø©',
              text_en: 'Best physical therapy clinic I have tried, cooperative team and distinguished service',
              rating: 5
            },
            {
              id: 3,
              name_ar: 'Ù…Ø­Ù…ÙˆØ¯ Ø³Ø§Ù„Ù…',
              name_en: 'Mahmoud Salem',
              text_ar: 'Ø´ÙÙŠØª Ù…Ù† Ø¢Ù„Ø§Ù… Ø§Ù„Ø¸Ù‡Ø± Ø§Ù„Ù…Ø²Ù…Ù†Ø© Ø¨ÙØ¶Ù„ Ø§Ù„Ø¹Ù„Ø§Ø¬ Ø§Ù„Ù…ØªØ®ØµØµ',
              text_en: 'I recovered from chronic back pain thanks to the specialized treatment',
              rating: 5
            }
          ]
        },
        i18n: {
          dict: {
            // Navigation
            'nav.home': { ar: 'Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©', en: 'Home' },
            'nav.services': { ar: 'Ø§Ù„Ø®Ø¯Ù…Ø§Øª', en: 'Services' },
            'nav.about': { ar: 'Ù…Ù† Ù†Ø­Ù†', en: 'About Us' },
            'nav.contact': { ar: 'Ø§ØªØµÙ„ Ø¨Ù†Ø§', en: 'Contact Us' },
            'nav.book': { ar: 'Ø§Ø­Ø¬Ø² Ø§Ù„Ø¢Ù†', en: 'Book Now' },

            // Hero Section
            'hero.title': { ar: 'Ø¹ÙŠØ§Ø¯Ø§Øª Ø¯ÙƒØªÙˆØ±Ø© Ù…Ø±ÙˆØ© Ø­Ø³ÙŠÙ†', en: 'Dr. Marwa Hussein Clinics' },
            'hero.subtitle': { ar: 'Ù„Ù„Ø¹Ù„Ø§Ø¬ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ£Ù‡ÙŠÙ„', en: 'For Physical Therapy and Rehabilitation' },
            'hero.description': { ar: 'Ù†Ù‚Ø¯Ù… Ø£Ø­Ø¯Ø« ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ø¹Ù„Ø§Ø¬ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ Ø¨Ø£ÙŠØ¯ÙŠ Ø®Ø¨Ø±Ø§Ø¡ Ù…ØªØ®ØµØµÙŠÙ†', en: 'We provide the latest physical therapy techniques by specialized experts' },
            'hero.cta': { ar: 'Ø§Ø­Ø¬Ø² Ù…ÙˆØ¹Ø¯Ùƒ Ø§Ù„Ø¢Ù†', en: 'Book Your Appointment' },

            // Services Section
            'services.title': { ar: 'Ø®Ø¯Ù…Ø§ØªÙ†Ø§', en: 'Our Services' },
            'services.subtitle': { ar: 'Ù†Ù‚Ø¯Ù… Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…ØªÙƒØ§Ù…Ù„Ø© Ù…Ù† Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¹Ù„Ø§Ø¬ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ', en: 'We offer a comprehensive range of physical therapy services' },

            // About Section
            'about.title': { ar: 'Ù…Ù† Ù†Ø­Ù†', en: 'About Us' },
            'about.description': { ar: 'Ø¹ÙŠØ§Ø¯Ø§Øª Ù…ØªØ®ØµØµØ© ÙÙŠ Ø§Ù„Ø¹Ù„Ø§Ø¬ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ£Ù‡ÙŠÙ„ ØªØ­Øª Ø¥Ø´Ø±Ø§Ù Ø§Ù„Ø¯ÙƒØªÙˆØ±Ø© Ù…Ø±ÙˆØ© Ø­Ø³ÙŠÙ†. Ù†Ù„ØªØ²Ù… Ø¨ØªÙ‚Ø¯ÙŠÙ… Ø£ÙØ¶Ù„ Ø±Ø¹Ø§ÙŠØ© ØµØ­ÙŠØ© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø£Ø­Ø¯Ø« Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª ÙˆØ§Ù„Ø£Ø³Ø§Ù„ÙŠØ¨ Ø§Ù„Ø¹Ù„Ø§Ø¬ÙŠØ©.', en: 'Specialized clinics in physical therapy and rehabilitation under the supervision of Dr. Marwa Hussein. We are committed to providing the best healthcare using the latest technologies and therapeutic methods.' },
            'about.experience': { ar: 'Ø³Ù†ÙˆØ§Øª Ù…Ù† Ø§Ù„Ø®Ø¨Ø±Ø©', en: 'Years of Experience' },
            'about.patients': { ar: 'Ù…Ø±ÙŠØ¶ Ø³Ø¹ÙŠØ¯', en: 'Happy Patients' },
            'about.success': { ar: 'Ù†Ø³Ø¨Ø© Ù†Ø¬Ø§Ø­', en: 'Success Rate' },

            // Testimonials
            'testimonials.title': { ar: 'Ø¢Ø±Ø§Ø¡ Ø§Ù„Ù…Ø±Ø¶Ù‰', en: 'Patient Reviews' },
            'testimonials.subtitle': { ar: 'Ù…Ø§Ø°Ø§ ÙŠÙ‚ÙˆÙ„ Ù…Ø±Ø¶Ø§Ù†Ø§ Ø¹Ù†Ø§', en: 'What our patients say about us' },

            // Contact Section
            'contact.title': { ar: 'Ø§ØªØµÙ„ Ø¨Ù†Ø§', en: 'Contact Us' },
            'contact.phone': { ar: 'Ø§Ù„Ù‡Ø§ØªÙ', en: 'Phone' },
            'contact.email': { ar: 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ', en: 'Email' },
            'contact.address': { ar: 'Ø§Ù„Ø¹Ù†ÙˆØ§Ù†', en: 'Address' },
            'contact.hours': { ar: 'Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„', en: 'Working Hours' },

            // Booking Form
            'booking.title': { ar: 'Ø§Ø­Ø¬Ø² Ù…ÙˆØ¹Ø¯Ùƒ', en: 'Book Your Appointment' },
            'booking.firstName': { ar: 'Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø£ÙˆÙ„', en: 'First Name' },
            'booking.lastName': { ar: 'Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø£Ø®ÙŠØ±', en: 'Last Name' },
            'booking.phone': { ar: 'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ', en: 'Phone Number' },
            'booking.email': { ar: 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ', en: 'Email' },
            'booking.service': { ar: 'Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©', en: 'Required Service' },
            'booking.selectService': { ar: 'Ø§Ø®ØªØ± Ø§Ù„Ø®Ø¯Ù…Ø©', en: 'Select Service' },
            'booking.date': { ar: 'Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙØ¶Ù„', en: 'Preferred Date' },
            'booking.time': { ar: 'Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ÙØ¶Ù„', en: 'Preferred Time' },
            'booking.notes': { ar: 'Ù…Ù„Ø§Ø­Ø¸Ø§Øª', en: 'Notes' },
            'booking.submit': { ar: 'Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨', en: 'Submit Request' },
            'booking.cancel': { ar: 'Ø¥Ù„ØºØ§Ø¡', en: 'Cancel' },
            'booking.success': { ar: 'ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­! Ø³Ù†ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹', en: 'Your request has been sent successfully! We will contact you soon' },

            // Footer
            'footer.rights': { ar: 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©', en: 'All Rights Reserved' },
            'footer.clinic': { ar: 'Ø¹ÙŠØ§Ø¯Ø§Øª Ø¯ÙƒØªÙˆØ±Ø© Ù…Ø±ÙˆØ© Ø­Ø³ÙŠÙ† Ù„Ù„Ø¹Ù„Ø§Ø¬ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ', en: 'Dr. Marwa Hussein Physical Therapy Clinics' }
          }
        }
      };

      // Translation Helper
      const t = function(key) {
        const lang = db.env.lang || 'ar';
        const dict = db.i18n.dict || {};
        return dict[key] && dict[key][lang] ? dict[key][lang] : key;
      };

      // Get translated field
      const tf = function(obj, field) {
        const lang = db.env.lang || 'ar';
        return obj[field + '_' + lang] || obj[field] || '';
      };

      // Event Handlers - Proper format for mishkah-core
      const orders = {
        'lang:switch': {
          on: ['click'],
          gkeys: ['lang:switch'],
          handler: function(event, context) {
            const newLang = event.target.dataset.lang;
            const state = context.getState();
            state.env.lang = newLang;
            state.env.dir = newLang === 'ar' ? 'rtl' : 'ltr';
            document.documentElement.setAttribute('lang', newLang);
            document.documentElement.setAttribute('dir', state.env.dir);
            context.rebuild();
          }
        },

        'theme:toggle': {
          on: ['click'],
          gkeys: ['theme:toggle'],
          handler: function(event, context) {
            const state = context.getState();
            state.env.theme = state.env.theme === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', state.env.theme);
            context.rebuild();
          }
        },

        'nav:click': {
          on: ['click'],
          gkeys: ['nav:click'],
          handler: function(event, context) {
            const page = event.target.dataset.page;
            const state = context.getState();
            state.data.currentPage = page;

            // Scroll to section
            const section = document.getElementById(page);
            if (section) {
              section.scrollIntoView({ behavior: 'smooth' });
            }

            context.rebuild();
          }
        },

        'booking:open': {
          on: ['click'],
          gkeys: ['booking:open'],
          handler: function(event, context) {
            const state = context.getState();
            state.data.showBookingForm = true;
            context.rebuild();
          }
        },

        'booking:close': {
          on: ['click'],
          gkeys: ['booking:close'],
          handler: function(event, context) {
            const state = context.getState();
            state.data.showBookingForm = false;
            state.data.bookingForm = {
              firstName: '',
              lastName: '',
              phone: '',
              email: '',
              serviceId: '',
              preferredDate: '',
              preferredTime: '',
              notes: ''
            };
            context.rebuild();
          }
        },

        'booking:input': {
          on: ['input', 'change'],
          gkeys: ['booking:input'],
          handler: function(event, context) {
            const field = event.target.name;
            const value = event.target.value;
            const state = context.getState();
            state.data.bookingForm[field] = value;
          }
        },

        'booking:submit': {
          on: ['submit'],
          gkeys: ['booking:submit'],
          handler: async function(event, context) {
            event.preventDefault();
            const state = context.getState();
            const form = state.data.bookingForm;

            // Validate
            if (!form.firstName || !form.lastName || !form.phone || !form.preferredDate) {
              alert(state.env.lang === 'ar' ? 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©' : 'Please fill all required fields');
              return;
            }

            // Here you would send the data to your backend
            console.log('Booking submitted:', form);

            // Show success message
            alert(t('booking.success'));

            // Close form
            state.data.showBookingForm = false;
            state.data.bookingForm = {
              firstName: '',
              lastName: '',
              phone: '',
              email: '',
              serviceId: '',
              preferredDate: '',
              preferredTime: '',
              notes: ''
            };
            context.rebuild();
          }
        }
      };

      // Components
      function Navbar(db, D) {
        return D.Containers.Nav({ attrs: { class: 'navbar' } }, [
          D.Containers.Div({ attrs: { class: 'navbar-container' } }, [
            // Logo
            D.Containers.Div({ attrs: { class: 'navbar-brand' } }, [
              D.Text.H2({}, [t('hero.title')])
            ]),

            // Navigation Links
            D.Containers.Div({ attrs: { class: 'navbar-links' } }, [
              D.Text.A({ attrs: { href: '#home', 'data-m-gkey': 'nav:click', 'data-page': 'home', class: db.data.currentPage === 'home' ? 'active' : '' } }, [t('nav.home')]),
              D.Text.A({ attrs: { href: '#services', 'data-m-gkey': 'nav:click', 'data-page': 'services', class: db.data.currentPage === 'services' ? 'active' : '' } }, [t('nav.services')]),
              D.Text.A({ attrs: { href: '#about', 'data-m-gkey': 'nav:click', 'data-page': 'about', class: db.data.currentPage === 'about' ? 'active' : '' } }, [t('nav.about')]),
              D.Text.A({ attrs: { href: '#contact', 'data-m-gkey': 'nav:click', 'data-page': 'contact', class: db.data.currentPage === 'contact' ? 'active' : '' } }, [t('nav.contact')]),
              D.Forms.Button({ attrs: { class: 'btn btn-primary', 'data-m-gkey': 'booking:open' } }, [t('nav.book')])
            ]),

            // Language Switcher using UI.Switcher
            D.Containers.Div({ attrs: { class: 'flex items-center gap-2' } }, [
              UI.Switcher({
                attrs: { 'data-m-gkey': 'lang:switch' },
                value: db.env.lang,
                options: [
                  { label: 'Ø¹', value: 'ar', attrs: { 'data-lang': 'ar' } },
                  { label: 'EN', value: 'en', attrs: { 'data-lang': 'en' } }
                ]
              }),
              // Theme Toggle Button
              D.Forms.Button({
                attrs: {
                  'data-m-gkey': 'theme:toggle',
                  class: 'theme-toggle-btn',
                  title: db.env.theme === 'dark' ? 'Switch to Light Mode' : 'Switch to Dark Mode'
                }
              }, [db.env.theme === 'dark' ? 'ğŸŒ' : 'ğŸŒ™'])
            ])
          ])
        ]);
      }

      function HeroSection(db, D) {
        return D.Containers.Section({ attrs: { id: 'home', class: 'hero-section' } }, [
          D.Containers.Div({ attrs: { class: 'hero-content' } }, [
            D.Text.H1({ attrs: { class: 'hero-title' } }, [t('hero.title')]),
            D.Text.H2({ attrs: { class: 'hero-subtitle' } }, [t('hero.subtitle')]),
            D.Text.P({ attrs: { class: 'hero-description' } }, [t('hero.description')]),
            D.Forms.Button({ attrs: { class: 'btn btn-large btn-primary', 'data-m-gkey': 'booking:open' } }, [t('hero.cta')])
          ])
        ]);
      }

      function ServicesSection(db, D) {
        return D.Containers.Section({ attrs: { id: 'services', class: 'services-section' } }, [
          D.Containers.Div({ attrs: { class: 'section-header' } }, [
            D.Text.H2({ attrs: { class: 'section-title' } }, [t('services.title')]),
            D.Text.P({ attrs: { class: 'section-subtitle' } }, [t('services.subtitle')])
          ]),
          D.Containers.Div({ attrs: { class: 'services-grid' } },
            db.data.services.map(function(service) {
              return D.Containers.Div({ attrs: { class: 'service-card', key: service.id } }, [
                D.Text.Span({ attrs: { class: 'service-icon' } }, [service.icon]),
                D.Text.H3({ attrs: { class: 'service-name' } }, [tf(service, 'name')]),
                D.Text.P({ attrs: { class: 'service-description' } }, [tf(service, 'description')])
              ]);
            })
          )
        ]);
      }

      function AboutSection(db, D) {
        return D.Containers.Section({ attrs: { id: 'about', class: 'about-section' } }, [
          D.Containers.Div({ attrs: { class: 'section-header' } }, [
            D.Text.H2({ attrs: { class: 'section-title' } }, [t('about.title')])
          ]),
          D.Containers.Div({ attrs: { class: 'about-content' } }, [
            D.Containers.Div({ attrs: { class: 'about-text' } }, [
              D.Text.P({}, [t('about.description')])
            ]),
            D.Containers.Div({ attrs: { class: 'about-stats' } }, [
              D.Containers.Div({ attrs: { class: 'stat' } }, [
                D.Text.H3({}, ['15+']),
                D.Text.P({}, [t('about.experience')])
              ]),
              D.Containers.Div({ attrs: { class: 'stat' } }, [
                D.Text.H3({}, ['5000+']),
                D.Text.P({}, [t('about.patients')])
              ]),
              D.Containers.Div({ attrs: { class: 'stat' } }, [
                D.Text.H3({}, ['98%']),
                D.Text.P({}, [t('about.success')])
              ])
            ])
          ])
        ]);
      }

      function TestimonialsSection(db, D) {
        return D.Containers.Section({ attrs: { class: 'testimonials-section' } }, [
          D.Containers.Div({ attrs: { class: 'section-header' } }, [
            D.Text.H2({ attrs: { class: 'section-title' } }, [t('testimonials.title')]),
            D.Text.P({ attrs: { class: 'section-subtitle' } }, [t('testimonials.subtitle')])
          ]),
          D.Containers.Div({ attrs: { class: 'testimonials-grid' } },
            db.data.testimonials.map(function(testimonial) {
              return D.Containers.Div({ attrs: { class: 'testimonial-card', key: testimonial.id } }, [
                D.Containers.Div({ attrs: { class: 'testimonial-rating' } }, [
                  D.Text.Span({}, ['â­'.repeat(testimonial.rating)])
                ]),
                D.Text.P({ attrs: { class: 'testimonial-text' } }, [tf(testimonial, 'text')]),
                D.Text.Strong({ attrs: { class: 'testimonial-name' } }, [tf(testimonial, 'name')])
              ]);
            })
          )
        ]);
      }

      function ContactSection(db, D) {
        const addressAr = 'Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ø¹Ø¨ÙˆØ± - Ø§Ù„Ø­ÙŠ Ø§Ù„ØªØ§Ø³Ø¹ - Ù…ÙŠØ¯ÙŠÙƒØ§Ù„ Ø¯ÙŠØ³ØªÙ†ÙŠØ´Ù† - Ø§Ù„Ø¯ÙˆØ± Ø§Ù„Ø«Ø§Ù†ÙŠ S51';
        const addressEn = 'Obour City - 9th District - Medical Destination - 2nd Floor S51';
        const mapUrl = 'https://maps.google.com/maps/search/Ù…Ø¯ÙŠÙ†Ø©%20Ø§Ù„Ø¹Ø¨ÙˆØ±%20-%20Ø§Ù„Ø­ÙŠ%20Ø§Ù„ØªØ§Ø³Ø¹%20-%20Ù…ÙŠØ¯ÙŠÙƒØ§Ù„%20Ø¯ÙŠØ³ØªÙ†ÙŠØ´Ù†%20-%20Ø§Ù„Ø¯ÙˆØ±%20Ø§Ù„Ø«Ø§Ù†ÙŠ%20S51';

        return D.Containers.Section({ attrs: { id: 'contact', class: 'contact-section' } }, [
          D.Containers.Div({ attrs: { class: 'section-header' } }, [
            D.Text.H2({ attrs: { class: 'section-title' } }, [t('contact.title')])
          ]),
          D.Containers.Div({ attrs: { class: 'contact-grid' } }, [
            D.Containers.Div({ attrs: { class: 'contact-item' } }, [
              D.Text.Span({ attrs: { class: 'contact-icon' } }, ['ğŸ“']),
              D.Text.H3({}, [t('contact.phone')]),
              D.Text.A({ attrs: { href: 'tel:+201066558085', style: 'text-decoration: none; color: inherit;' } }, ['+20 10 66558085'])
            ]),
            D.Containers.Div({ attrs: { class: 'contact-item' } }, [
              D.Text.Span({ attrs: { class: 'contact-icon' } }, ['âœ‰ï¸']),
              D.Text.H3({}, [t('contact.email')]),
              D.Text.A({ attrs: { href: 'mailto:info@marwaclinic.com', style: 'text-decoration: none; color: inherit;' } }, ['info@marwaclinic.com'])
            ]),
            D.Containers.Div({ attrs: { class: 'contact-item' } }, [
              D.Text.Span({ attrs: { class: 'contact-icon' } }, ['ğŸ“']),
              D.Text.H3({}, [t('contact.address')]),
              D.Text.A({
                attrs: {
                  href: mapUrl,
                  target: '_blank',
                  rel: 'noopener noreferrer',
                  style: 'text-decoration: none; color: inherit;'
                }
              }, [db.env.lang === 'ar' ? addressAr : addressEn])
            ]),
            D.Containers.Div({ attrs: { class: 'contact-item' } }, [
              D.Text.Span({ attrs: { class: 'contact-icon' } }, ['ğŸ•']),
              D.Text.H3({}, [t('contact.hours')]),
              D.Text.P({}, [db.env.lang === 'ar' ? 'Ø§Ù„Ø³Ø¨Øª - Ø§Ù„Ø®Ù…ÙŠØ³: 8 ØµØ¨Ø§Ø­Ø§Ù‹ - 8 Ù…Ø³Ø§Ø¡Ù‹' : 'Saturday - Thursday: 8 AM - 8 PM'])
            ])
          ]),
          // Google Maps Embed
          D.Containers.Div({ attrs: { class: 'map-container', style: 'margin-top: 2rem; border-radius: 8px; overflow: hidden; height: 400px;' } }, [
            D.Media.Iframe({
              attrs: {
                src: 'https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3453.123456789!2d31.4554!3d30.2163!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMzDCsDEyJzU4LjciTiAzMcKwMjcnMTkuNCJF!5e0!3m2!1sen!2seg!4v1234567890',
                width: '100%',
                height: '100%',
                style: 'border:0;',
                allowfullscreen: '',
                loading: 'lazy',
                referrerpolicy: 'no-referrer-when-downgrade'
              }
            })
          ])
        ]);
      }

      function BookingForm(db, D) {
        if (!db.data.showBookingForm) return null;

        return D.Containers.Div({ attrs: { class: 'modal-overlay', 'data-m-gkey': 'booking:close' } }, [
          D.Containers.Div({
            attrs: {
              class: 'modal-content booking-modal',
              onclick: 'event.stopPropagation()'
            }
          }, [
            D.Text.H2({ attrs: { class: 'modal-title' } }, [t('booking.title')]),
            D.Forms.Form({ attrs: { class: 'booking-form', 'data-m-gkey': 'booking:submit' } }, [
              D.Containers.Div({ attrs: { class: 'form-row' } }, [
                D.Containers.Div({ attrs: { class: 'form-group' } }, [
                  D.Forms.Label({}, [t('booking.firstName') + ' *']),
                  D.Inputs.Input({
                    attrs: {
                      type: 'text',
                      name: 'firstName',
                      value: db.data.bookingForm.firstName,
                      required: true,
                      'data-m-gkey': 'booking:input'
                    }
                  })
                ]),
                D.Containers.Div({ attrs: { class: 'form-group' } }, [
                  D.Forms.Label({}, [t('booking.lastName') + ' *']),
                  D.Inputs.Input({
                    attrs: {
                      type: 'text',
                      name: 'lastName',
                      value: db.data.bookingForm.lastName,
                      required: true,
                      'data-m-gkey': 'booking:input'
                    }
                  })
                ])
              ]),

              D.Containers.Div({ attrs: { class: 'form-row' } }, [
                D.Containers.Div({ attrs: { class: 'form-group' } }, [
                  D.Forms.Label({}, [t('booking.phone') + ' *']),
                  D.Inputs.Input({
                    attrs: {
                      type: 'tel',
                      name: 'phone',
                      value: db.data.bookingForm.phone,
                      required: true,
                      'data-m-gkey': 'booking:input'
                    }
                  })
                ]),
                D.Containers.Div({ attrs: { class: 'form-group' } }, [
                  D.Forms.Label({}, [t('booking.email')]),
                  D.Inputs.Input({
                    attrs: {
                      type: 'email',
                      name: 'email',
                      value: db.data.bookingForm.email,
                      'data-m-gkey': 'booking:input'
                    }
                  })
                ])
              ]),

              D.Containers.Div({ attrs: { class: 'form-group' } }, [
                D.Forms.Label({}, [t('booking.service')]),
                D.Inputs.Select({
                  attrs: {
                    name: 'serviceId',
                    'data-m-gkey': 'booking:input'
                  }
                }, [
                  D.Inputs.Option({ attrs: { value: '' } }, [t('booking.selectService')]),
                  ...db.data.services.map(function(service) {
                    return D.Inputs.Option({
                      attrs: {
                        value: service.id,
                        selected: db.data.bookingForm.serviceId == service.id
                      }
                    }, [tf(service, 'name')]);
                  })
                ])
              ]),

              D.Containers.Div({ attrs: { class: 'form-row' } }, [
                D.Containers.Div({ attrs: { class: 'form-group' } }, [
                  D.Forms.Label({}, [t('booking.date') + ' *']),
                  D.Inputs.Input({
                    attrs: {
                      type: 'date',
                      name: 'preferredDate',
                      value: db.data.bookingForm.preferredDate,
                      required: true,
                      'data-m-gkey': 'booking:input'
                    }
                  })
                ]),
                D.Containers.Div({ attrs: { class: 'form-group' } }, [
                  D.Forms.Label({}, [t('booking.time')]),
                  D.Inputs.Input({
                    attrs: {
                      type: 'time',
                      name: 'preferredTime',
                      value: db.data.bookingForm.preferredTime,
                      'data-m-gkey': 'booking:input'
                    }
                  })
                ])
              ]),

              D.Containers.Div({ attrs: { class: 'form-group' } }, [
                D.Forms.Label({}, [t('booking.notes')]),
                D.Inputs.Textarea({
                  attrs: {
                    name: 'notes',
                    rows: 4,
                    'data-m-gkey': 'booking:input'
                  }
                }, [db.data.bookingForm.notes])
              ]),

              D.Containers.Div({ attrs: { class: 'form-actions' } }, [
                D.Forms.Button({ attrs: { type: 'button', class: 'btn btn-secondary', 'data-m-gkey': 'booking:close' } }, [t('booking.cancel')]),
                D.Forms.Button({ attrs: { type: 'submit', class: 'btn btn-primary' } }, [t('booking.submit')])
              ])
            ])
          ])
        ]);
      }

      function Footer(db, D) {
        return D.Containers.Footer({ attrs: { class: 'footer' } }, [
          D.Containers.Div({ attrs: { class: 'footer-content' } }, [
            D.Text.P({}, [t('footer.rights') + ' Â© 2024 ' + t('footer.clinic')])
          ])
        ]);
      }

      // Main App Body
      M.app.setBody(function(stateWrapper, D) {
        const state = stateWrapper;

        return D.Containers.Div({ attrs: { class: 'app-container' } }, [
          Navbar(state, D),
          D.Containers.Main({}, [
            HeroSection(state, D),
            ServicesSection(state, D),
            AboutSection(state, D),
            TestimonialsSection(state, D),
            ContactSection(state, D)
          ]),
          BookingForm(state, D),
          Footer(state, D)
        ].filter(Boolean));
      });

      // Create and Mount App
      const app = M.app.createApp(db, orders);
      app.mount('#app');

      console.log('Physical Therapy Clinic website loaded successfully!');
    })();
  </script>
</body>
</html>
