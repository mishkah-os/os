{
  "name": "pos",
  "title": "Point of Sale",
  "description": "POS module schema matching actual data structure",
  "schema": {
    "tables": [
      {
        "name": "settings",
        "label": "Settings",
        "comment": "POS system settings and configuration",
        "sqlName": "settings",
        "layout": {
          "x": 0,
          "y": 0
        },
        "fields": [
          {
            "name": "id",
            "columnName": "id",
            "type": "string",
            "nullable": false,
            "primaryKey": true,
            "unique": true,
            "comment": "Unique identifier"
          },
          {
            "name": "tax_rate",
            "columnName": "tax_rate",
            "type": "number",
            "nullable": false,
            "defaultValue": 0.14,
            "comment": "Tax rate percentage"
          },
          {
            "name": "service_charge_rate",
            "columnName": "service_charge_rate",
            "type": "number",
            "nullable": false,
            "defaultValue": 0.12,
            "comment": "Service charge rate percentage"
          },
          {
            "name": "default_delivery_fee",
            "columnName": "default_delivery_fee",
            "type": "number",
            "nullable": false,
            "defaultValue": 30,
            "comment": "Default delivery fee"
          },
          {
            "name": "currency",
            "columnName": "currency",
            "type": "json",
            "nullable": false,
            "defaultValue": {},
            "comment": "Currency configuration"
          },
          {
            "name": "sync",
            "columnName": "sync",
            "type": "json",
            "nullable": false,
            "defaultValue": {},
            "comment": "Sync configuration"
          }
        ]
      },
      {
        "name": "shift_settings",
        "label": "Shift Settings",
        "comment": "Shift configuration settings",
        "sqlName": "shift_settings",
        "layout": {
          "x": 100,
          "y": 0
        },
        "fields": [
          {
            "name": "id",
            "columnName": "id",
            "type": "string",
            "nullable": false,
            "primaryKey": true,
            "unique": true,
            "comment": "Unique identifier"
          },
          {
            "name": "opening_float",
            "columnName": "opening_float",
            "type": "number",
            "nullable": false,
            "defaultValue": 500,
            "comment": "Opening cash float amount"
          },
          {
            "name": "pin",
            "columnName": "pin",
            "type": "string",
            "nullable": false,
            "comment": "PIN code for shift operations"
          },
          {
            "name": "pin_length",
            "columnName": "pin_length",
            "type": "integer",
            "nullable": false,
            "defaultValue": 4,
            "comment": "Length of PIN code"
          }
        ]
      },
      {
        "name": "payment_methods",
        "label": "Payment Methods",
        "comment": "Available payment methods",
        "sqlName": "payment_methods",
        "layout": {
          "x": 200,
          "y": 0
        },
        "fields": [
          {
            "name": "id",
            "columnName": "id",
            "type": "string",
            "nullable": false,
            "primaryKey": true,
            "unique": true,
            "comment": "Payment method ID"
          },
          {
            "name": "icon",
            "columnName": "icon",
            "type": "string",
            "nullable": true,
            "comment": "Icon for payment method"
          },
          {
            "name": "name",
            "columnName": "name",
            "type": "json",
            "nullable": false,
            "defaultValue": {},
            "comment": "Localized name (en/ar)"
          },
          {
            "name": "type",
            "columnName": "type",
            "type": "string",
            "nullable": false,
            "comment": "Payment type (cash/card/wallet)"
          }
        ]
      },
      {
        "name": "shifts",
        "label": "Shifts",
        "comment": "Active and historical shifts",
        "sqlName": "shifts",
        "layout": {
          "x": 0,
          "y": 100
        },
        "fields": [
          {
            "name": "id",
            "columnName": "id",
            "type": "string",
            "nullable": false,
            "primaryKey": true,
            "unique": true,
            "comment": "Shift ID"
          },
          {
            "name": "cashier_id",
            "columnName": "cashier_id",
            "type": "string",
            "nullable": false,
            "comment": "Cashier employee ID"
          },
          {
            "name": "opened_at",
            "columnName": "opened_at",
            "type": "timestamp",
            "nullable": false,
            "comment": "Shift opening timestamp"
          },
          {
            "name": "closed_at",
            "columnName": "closed_at",
            "type": "timestamp",
            "nullable": true,
            "comment": "Shift closing timestamp"
          },
          {
            "name": "opening_float",
            "columnName": "opening_float",
            "type": "number",
            "nullable": false,
            "comment": "Opening cash float"
          },
          {
            "name": "status",
            "columnName": "status",
            "type": "string",
            "nullable": false,
            "comment": "Shift status (open/closed)"
          }
        ]
      },
      {
        "name": "kitchen_sections",
        "label": "Kitchen Sections",
        "comment": "Kitchen sections/stations",
        "sqlName": "kitchen_sections",
        "layout": {
          "x": 100,
          "y": 100
        },
        "fields": [
          {
            "name": "id",
            "columnName": "id",
            "type": "string",
            "nullable": false,
            "primaryKey": true,
            "unique": true,
            "comment": "Section ID"
          },
          {
            "name": "section_name",
            "columnName": "section_name",
            "type": "json",
            "nullable": false,
            "defaultValue": {},
            "comment": "Localized section name"
          },
          {
            "name": "description",
            "columnName": "description",
            "type": "json",
            "nullable": true,
            "defaultValue": {},
            "comment": "Localized description"
          }
        ]
      },
      {
        "name": "category_sections",
        "label": "Category Sections",
        "comment": "Mapping between categories and kitchen sections",
        "sqlName": "category_sections",
        "layout": {
          "x": 200,
          "y": 100
        },
        "fields": [
          {
            "name": "category_id",
            "columnName": "category_id",
            "type": "string",
            "nullable": false,
            "primaryKey": true,
            "comment": "Category ID"
          },
          {
            "name": "section_id",
            "columnName": "section_id",
            "type": "string",
            "nullable": false,
            "comment": "Kitchen section ID"
          }
        ]
      },
      {
        "name": "order_types",
        "label": "Order Types",
        "comment": "Available order types (dine-in, delivery, takeaway)",
        "sqlName": "order_types",
        "layout": {
          "x": 0,
          "y": 200
        },
        "fields": [
          {
            "name": "id",
            "columnName": "id",
            "type": "string",
            "nullable": false,
            "primaryKey": true,
            "unique": true,
            "comment": "Order type ID"
          },
          {
            "name": "type_name",
            "columnName": "type_name",
            "type": "json",
            "nullable": false,
            "defaultValue": {},
            "comment": "Localized type name"
          },
          {
            "name": "description",
            "columnName": "description",
            "type": "json",
            "nullable": true,
            "defaultValue": {},
            "comment": "Localized description"
          },
          {
            "name": "workflow",
            "columnName": "workflow",
            "type": "string",
            "nullable": false,
            "comment": "Workflow type (single-step/multi-step)"
          },
          {
            "name": "allows_save",
            "columnName": "allows_save",
            "type": "boolean",
            "nullable": false,
            "defaultValue": false,
            "comment": "Allow saving order"
          },
          {
            "name": "allows_finalize_later",
            "columnName": "allows_finalize_later",
            "type": "boolean",
            "nullable": false,
            "defaultValue": false,
            "comment": "Allow finalizing later"
          },
          {
            "name": "allows_line_additions",
            "columnName": "allows_line_additions",
            "type": "boolean",
            "nullable": false,
            "defaultValue": false,
            "comment": "Allow adding items later"
          },
          {
            "name": "allows_returns",
            "columnName": "allows_returns",
            "type": "boolean",
            "nullable": false,
            "defaultValue": false,
            "comment": "Allow returns"
          }
        ]
      },
      {
        "name": "order_statuses",
        "label": "Order Statuses",
        "comment": "Available order statuses",
        "sqlName": "order_statuses",
        "layout": {
          "x": 100,
          "y": 200
        },
        "fields": [
          {
            "name": "id",
            "columnName": "id",
            "type": "string",
            "nullable": false,
            "primaryKey": true,
            "unique": true,
            "comment": "Status ID"
          },
          {
            "name": "status_name",
            "columnName": "status_name",
            "type": "json",
            "nullable": false,
            "defaultValue": {},
            "comment": "Localized status name"
          }
        ]
      },
      {
        "name": "order_payment_states",
        "label": "Order Payment States",
        "comment": "Payment states for orders",
        "sqlName": "order_payment_states",
        "layout": {
          "x": 200,
          "y": 200
        },
        "fields": [
          {
            "name": "id",
            "columnName": "id",
            "type": "string",
            "nullable": false,
            "primaryKey": true,
            "unique": true,
            "comment": "Payment state ID"
          },
          {
            "name": "payment_name",
            "columnName": "payment_name",
            "type": "json",
            "nullable": false,
            "defaultValue": {},
            "comment": "Localized payment state name"
          }
        ]
      },
      {
        "name": "order_stages",
        "label": "Order Stages",
        "comment": "Order lifecycle stages",
        "sqlName": "order_stages",
        "layout": {
          "x": 0,
          "y": 300
        },
        "fields": [
          {
            "name": "id",
            "columnName": "id",
            "type": "string",
            "nullable": false,
            "primaryKey": true,
            "unique": true,
            "comment": "Stage ID"
          },
          {
            "name": "stage_name",
            "columnName": "stage_name",
            "type": "json",
            "nullable": false,
            "defaultValue": {},
            "comment": "Localized stage name"
          },
          {
            "name": "description",
            "columnName": "description",
            "type": "json",
            "nullable": true,
            "defaultValue": {},
            "comment": "Localized description"
          },
          {
            "name": "sequence",
            "columnName": "sequence",
            "type": "integer",
            "nullable": false,
            "comment": "Stage sequence number"
          },
          {
            "name": "lock_line_edits",
            "columnName": "lock_line_edits",
            "type": "boolean",
            "nullable": false,
            "defaultValue": false,
            "comment": "Lock line item edits"
          }
        ]
      },
      {
        "name": "order_line_statuses",
        "label": "Order Line Statuses",
        "comment": "Statuses for individual order line items",
        "sqlName": "order_line_statuses",
        "layout": {
          "x": 100,
          "y": 300
        },
        "fields": [
          {
            "name": "id",
            "columnName": "id",
            "type": "string",
            "nullable": false,
            "primaryKey": true,
            "unique": true,
            "comment": "Status ID"
          },
          {
            "name": "status_name",
            "columnName": "status_name",
            "type": "json",
            "nullable": false,
            "defaultValue": {},
            "comment": "Localized status name"
          }
        ]
      },
      {
        "name": "employees",
        "label": "Employees",
        "comment": "POS system employees",
        "sqlName": "employees",
        "layout": {
          "x": 200,
          "y": 300
        },
        "fields": [
          {
            "name": "id",
            "columnName": "id",
            "type": "string",
            "nullable": false,
            "primaryKey": true,
            "unique": true,
            "comment": "Employee ID"
          },
          {
            "name": "pin_code",
            "columnName": "pin_code",
            "type": "string",
            "nullable": false,
            "comment": "Employee PIN code"
          },
          {
            "name": "full_name",
            "columnName": "full_name",
            "type": "string",
            "nullable": false,
            "comment": "Full name"
          },
          {
            "name": "role",
            "columnName": "role",
            "type": "string",
            "nullable": false,
            "comment": "Employee role"
          },
          {
            "name": "allowed_discount_rate",
            "columnName": "allowed_discount_rate",
            "type": "number",
            "nullable": false,
            "defaultValue": 0,
            "comment": "Maximum discount rate allowed"
          }
        ]
      },
      {
        "name": "tableLocks",
        "label": "Table Locks",
        "comment": "Table locking for concurrent access control",
        "sqlName": "table_locks",
        "layout": {
          "x": 0,
          "y": 400
        },
        "fields": [
          {
            "name": "id",
            "columnName": "id",
            "type": "string",
            "nullable": false,
            "primaryKey": true,
            "unique": true,
            "comment": "Lock ID"
          },
          {
            "name": "table_id",
            "columnName": "table_id",
            "type": "string",
            "nullable": false,
            "comment": "Table ID"
          },
          {
            "name": "locked_by",
            "columnName": "locked_by",
            "type": "string",
            "nullable": false,
            "comment": "User who locked the table"
          },
          {
            "name": "locked_at",
            "columnName": "locked_at",
            "type": "timestamp",
            "nullable": false,
            "comment": "Lock timestamp"
          }
        ]
      },
      {
        "name": "orders",
        "label": "Orders",
        "comment": "Customer orders",
        "sqlName": "orders",
        "layout": {
          "x": 100,
          "y": 400
        },
        "fields": [
          {
            "name": "id",
            "columnName": "id",
            "type": "string",
            "nullable": false,
            "primaryKey": true,
            "unique": true,
            "comment": "Order ID"
          },
          {
            "name": "order_number",
            "columnName": "order_number",
            "type": "string",
            "nullable": false,
            "comment": "Human-readable order number"
          },
          {
            "name": "order_type",
            "columnName": "order_type",
            "type": "string",
            "nullable": false,
            "comment": "Order type ID"
          },
          {
            "name": "status",
            "columnName": "status",
            "type": "string",
            "nullable": false,
            "comment": "Order status"
          },
          {
            "name": "stage",
            "columnName": "stage",
            "type": "string",
            "nullable": false,
            "comment": "Order stage"
          },
          {
            "name": "payment_state",
            "columnName": "payment_state",
            "type": "string",
            "nullable": false,
            "comment": "Payment state"
          },
          {
            "name": "items",
            "columnName": "items",
            "type": "json",
            "nullable": false,
            "defaultValue": [],
            "comment": "Order line items"
          },
          {
            "name": "total",
            "columnName": "total",
            "type": "number",
            "nullable": false,
            "defaultValue": 0,
            "comment": "Order total"
          },
          {
            "name": "created_at",
            "columnName": "created_at",
            "type": "timestamp",
            "nullable": false,
            "comment": "Creation timestamp"
          },
          {
            "name": "updated_at",
            "columnName": "updated_at",
            "type": "timestamp",
            "nullable": false,
            "comment": "Last update timestamp"
          }
        ]
      },
      {
        "name": "reservations",
        "label": "Reservations",
        "comment": "Table reservations",
        "sqlName": "reservations",
        "layout": {
          "x": 200,
          "y": 400
        },
        "fields": [
          {
            "name": "id",
            "columnName": "id",
            "type": "string",
            "nullable": false,
            "primaryKey": true,
            "unique": true,
            "comment": "Reservation ID"
          },
          {
            "name": "customerName",
            "columnName": "customer_name",
            "type": "string",
            "nullable": false,
            "comment": "Customer name"
          },
          {
            "name": "phone",
            "columnName": "phone",
            "type": "string",
            "nullable": true,
            "comment": "Contact phone"
          },
          {
            "name": "partySize",
            "columnName": "party_size",
            "type": "integer",
            "nullable": false,
            "comment": "Number of guests"
          },
          {
            "name": "scheduledAt",
            "columnName": "scheduled_at",
            "type": "timestamp",
            "nullable": false,
            "comment": "Scheduled arrival time"
          },
          {
            "name": "holdUntil",
            "columnName": "hold_until",
            "type": "timestamp",
            "nullable": true,
            "comment": "Hold table until"
          },
          {
            "name": "tableIds",
            "columnName": "table_ids",
            "type": "json",
            "nullable": false,
            "defaultValue": [],
            "comment": "Reserved table IDs"
          },
          {
            "name": "status",
            "columnName": "status",
            "type": "string",
            "nullable": false,
            "comment": "Reservation status"
          },
          {
            "name": "note",
            "columnName": "note",
            "type": "string",
            "nullable": true,
            "comment": "Special notes"
          }
        ]
      },
      {
        "name": "auditEvents",
        "label": "Audit Events",
        "comment": "Audit trail events",
        "sqlName": "audit_events",
        "layout": {
          "x": 0,
          "y": 500
        },
        "fields": [
          {
            "name": "id",
            "columnName": "id",
            "type": "string",
            "nullable": false,
            "primaryKey": true,
            "unique": true,
            "comment": "Event ID"
          },
          {
            "name": "userId",
            "columnName": "user_id",
            "type": "string",
            "nullable": false,
            "comment": "User who performed action"
          },
          {
            "name": "action",
            "columnName": "action",
            "type": "string",
            "nullable": false,
            "comment": "Action type"
          },
          {
            "name": "refType",
            "columnName": "ref_type",
            "type": "string",
            "nullable": true,
            "comment": "Reference entity type"
          },
          {
            "name": "refId",
            "columnName": "ref_id",
            "type": "string",
            "nullable": true,
            "comment": "Reference entity ID"
          },
          {
            "name": "at",
            "columnName": "at",
            "type": "timestamp",
            "nullable": false,
            "comment": "Event timestamp"
          },
          {
            "name": "meta",
            "columnName": "meta",
            "type": "json",
            "nullable": true,
            "defaultValue": {},
            "comment": "Additional metadata"
          }
        ]
      },
      {
        "name": "drivers",
        "label": "Drivers",
        "comment": "Delivery drivers",
        "sqlName": "drivers",
        "layout": {
          "x": 100,
          "y": 500
        },
        "fields": [
          {
            "name": "id",
            "columnName": "id",
            "type": "integer",
            "nullable": false,
            "primaryKey": true,
            "unique": true,
            "comment": "Driver ID"
          },
          {
            "name": "name",
            "columnName": "name",
            "type": "string",
            "nullable": false,
            "comment": "Driver name"
          },
          {
            "name": "phone",
            "columnName": "phone",
            "type": "string",
            "nullable": true,
            "comment": "Contact phone"
          },
          {
            "name": "vehicle_id",
            "columnName": "vehicle_id",
            "type": "string",
            "nullable": true,
            "comment": "Vehicle identifier"
          }
        ]
      },
      {
        "name": "categories",
        "label": "Categories",
        "comment": "Menu categories",
        "sqlName": "categories",
        "layout": {
          "x": 200,
          "y": 500
        },
        "fields": [
          {
            "name": "id",
            "columnName": "id",
            "type": "string",
            "nullable": false,
            "primaryKey": true,
            "unique": true,
            "comment": "Category ID"
          },
          {
            "name": "category_name",
            "columnName": "category_name",
            "type": "json",
            "nullable": false,
            "defaultValue": {},
            "comment": "Localized category name"
          },
          {
            "name": "section_id",
            "columnName": "section_id",
            "type": "string",
            "nullable": true,
            "comment": "Kitchen section ID"
          }
        ]
      },
      {
        "name": "items",
        "label": "Menu Items",
        "comment": "Menu items",
        "sqlName": "items",
        "layout": {
          "x": 0,
          "y": 600
        },
        "fields": [
          {
            "name": "id",
            "columnName": "id",
            "type": "integer",
            "nullable": false,
            "primaryKey": true,
            "unique": true,
            "comment": "Item ID"
          },
          {
            "name": "category_id",
            "columnName": "category_id",
            "type": "string",
            "nullable": false,
            "comment": "Category ID"
          },
          {
            "name": "kitchen_section_id",
            "columnName": "kitchen_section_id",
            "type": "string",
            "nullable": true,
            "comment": "Kitchen section ID"
          },
          {
            "name": "pricing",
            "columnName": "pricing",
            "type": "json",
            "nullable": false,
            "defaultValue": {},
            "comment": "Pricing information"
          },
          {
            "name": "media",
            "columnName": "media",
            "type": "json",
            "nullable": true,
            "defaultValue": {},
            "comment": "Media files (images, etc)"
          },
          {
            "name": "item_name",
            "columnName": "item_name",
            "type": "json",
            "nullable": false,
            "defaultValue": {},
            "comment": "Localized item name"
          },
          {
            "name": "item_description",
            "columnName": "item_description",
            "type": "json",
            "nullable": true,
            "defaultValue": {},
            "comment": "Localized item description"
          }
        ]
      },
      {
        "name": "add_ons",
        "label": "Add-ons",
        "comment": "Menu item add-ons/modifiers",
        "sqlName": "add_ons",
        "layout": {
          "x": 100,
          "y": 600
        },
        "fields": [
          {
            "name": "id",
            "columnName": "id",
            "type": "integer",
            "nullable": false,
            "primaryKey": true,
            "unique": true,
            "comment": "Add-on ID"
          },
          {
            "name": "name",
            "columnName": "name",
            "type": "json",
            "nullable": false,
            "defaultValue": {},
            "comment": "Localized add-on name"
          },
          {
            "name": "price_change",
            "columnName": "price_change",
            "type": "number",
            "nullable": false,
            "defaultValue": 0,
            "comment": "Price adjustment"
          }
        ]
      },
      {
        "name": "removals",
        "label": "Removals",
        "comment": "Menu item removals/exclusions",
        "sqlName": "removals",
        "layout": {
          "x": 200,
          "y": 600
        },
        "fields": [
          {
            "name": "id",
            "columnName": "id",
            "type": "integer",
            "nullable": false,
            "primaryKey": true,
            "unique": true,
            "comment": "Removal ID"
          },
          {
            "name": "name",
            "columnName": "name",
            "type": "json",
            "nullable": false,
            "defaultValue": {},
            "comment": "Localized removal name"
          },
          {
            "name": "price_change",
            "columnName": "price_change",
            "type": "number",
            "nullable": false,
            "defaultValue": 0,
            "comment": "Price adjustment"
          }
        ]
      }
    ]
  }
}
